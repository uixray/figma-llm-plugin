## Approved Plan:
# –ü–ª–∞–Ω: –£–ª—É—á—à–µ–Ω–∏—è Figma LLM Plugin V2
## –ö–æ–Ω—Ç–µ–∫—Å—Ç
**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (95% –≥–æ—Ç–æ–≤–æ):**
- ‚úÖ 25 AI –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã (Yandex √ó8, OpenAI, Claude, Gemini, Mistral, Groq, Cohere, LM Studio)
- ‚úÖ V2 –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è–º–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
- ‚úÖ –ú–æ–¥—É–ª—å–Ω–∞—è UI (6 –ø–∞–Ω–µ–ª–µ–π: Generate, Settings, Data, Rename, Prompts, Help)
- ‚úÖ i18n –ø–æ–¥–¥–µ—Ä–∂–∫–∞ (en/ru/ja)
- ‚úÖ Batch processor —Å –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–æ–º
- ‚úÖ Data presets (–ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö)
- ‚úÖ Rename —Å 4 –ø—Ä–µ—Å–µ—Ç–∞–º–∏ (BEM, camelCase, snakeCase, kebabCase)
- ‚úÖ Prompts library (—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ/–∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ–º–ø—Ç–æ–≤)
**–ü—Ä–æ–±–ª–µ–º—ã —Ç—Ä–µ–±—É—é—â–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
### 1. Multi-field —Ç–µ–∫—Å—Ç–æ–≤–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è (–ì–õ–ê–í–ù–û–ï –¢–†–ï–ë–û–í–ê–ù–ò–ï)
**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
- –ï—Å—Ç—å –ø–æ–ª–µ "Prompt" (–æ—Å–Ω–æ–≤–Ω–æ–π)
- –ï—Å—Ç—å "System Prompt" (–≤ Advanced)
- –ï—Å—Ç—å –∫–Ω–æ–ø–∫–∞ "Get Selected Text" - –¥–æ–±–∞–≤–ª—è–µ—Ç —Ç–µ–∫—Å—Ç –≤ prompt
**–ü—Ä–æ–±–ª–µ–º–∞:**
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ö–æ—á–µ—Ç –≤–∏–¥–µ—Ç—å –ù–ï–°–ö–û–õ–¨–ö–û –ø–æ–ª–µ–π –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∏ —á—Ç–æ–±—ã –ø–ª–∞–≥–∏–Ω "–ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º" –æ–±—ä–µ–¥–∏–Ω—è–ª –≤—Å–µ –≤ –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å –∫ API:
- –ü–æ–ª–µ 1: –û—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ–º–ø—Ç (–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è)
- –ü–æ–ª–µ 2: –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç
- –ü–æ–ª–µ 3+: –¢–µ–∫—Å—Ç –∏–∑ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —Å–ª–æ–µ–≤ (–º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ)
**–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ:** –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å (–ù–ï –æ—Ç–∫–∞–∑—ã–≤–∞—Ç—å—Å—è –µ—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ)
### 2. Prompts Library –Ω–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞
**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚ùå **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç** (–∫–Ω–æ–ø–∫–∞ Edit –≤—ã–¥–∞—ë—Ç alert –≤–º–µ—Å—Ç–æ –¥–∏–∞–ª–æ–≥–∞)
**–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ:** –°–¥–µ–ª–∞—Ç—å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–æ–≤ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º
### 3. Rename: –Ω—É–∂–Ω—ã –î–í–ê —Ä–µ–∂–∏–º–∞
**–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
- ‚úÖ –†–µ–∂–∏–º —Å—Ç–∏–ª–∏–∑–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç (BEM, camelCase, snakeCase, kebabCase)
- ‚ùå **AI —Ä–µ–∂–∏–º–∞ –ù–ï–¢** - –Ω–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ LLM —Å —É—á—ë—Ç–æ–º DOM —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
**–¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ:**
- –†–µ–∂–∏–º 1: –ü—Ä–æ—Å—Ç–∞—è —Å—Ç–∏–ª–∏–∑–∞—Ü–∏—è (–ë–ï–ó AI) - —É–∂–µ –µ—Å—Ç—å
- –†–µ–∂–∏–º 2: AI-powered –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Å —É—á—ë—Ç–æ–º DOM —Å—Ç—Ä—É–∫—Ç—É—Ä—ã (–∫–∞–∫ –≤ Figma –Ω–∞—Ç–∏–≤–Ω–æ)
### 4. –ü–æ—Ä—è–¥–æ–∫ –≤–∫–ª–∞–¥–æ–∫ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
**–¢–µ–∫—É—â–∏–π –ø–æ—Ä—è–¥–æ–∫:**
1. Generate
2. Settings
3. Data
4. Rename
5. Prompts
6. Help
**–¢—Ä–µ–±—É–µ–º—ã–π –ø–æ—Ä—è–¥–æ–∫:**
1. Generate (–ì–µ–Ω–µ—Ä–∞—Ü–∏—è)
2. Data (–ü–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö)
3. Rename (–ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ)
4. Settings (–ù–∞—Å—Ç—Ä–æ–π–∫–∏)
5. Help (–ü–æ–º–æ—â—å) - **Prompts —É–±—Ä–∞—Ç—å –∏–∑ –≤–∫–ª–∞–¥–æ–∫** (—Å–¥–µ–ª–∞—Ç—å —á–∞—Å—Ç—å—é Generate?)
---
## –ö—Ä–∏—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
**–ù–ï –ó–ê–ë–´–í–ê–¢–¨ –ò–°–•–û–î–ù–´–ô –§–£–ù–ö–¶–ò–û–ù–ê–õ!**
**–ö–†–ò–¢–ò–ß–ù–û –°–û–•–†–ê–ù–ò–¢–¨ –í–°–Å:**
- ‚úÖ 25 –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ –∏–∑ `src/shared/providers.ts`
- ‚úÖ V2 –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É (`UserProviderConfig`, `PluginSettings`)
- ‚úÖ –í—Å–µ handlers –≤ `code.ts` (15+ message types)
- ‚úÖ RenameHandler, PromptsHandler, BatchProcessor
- ‚úÖ StorageManager —Å –º–∏–≥—Ä–∞—Ü–∏–µ–π v1‚Üív2
- ‚úÖ i18n —Å–∏—Å—Ç–µ–º—É (en/ru/ja)
- ‚úÖ Data presets —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
- ‚úÖ –í—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ UI –ø–∞–Ω–µ–ª–∏
---
## –†–µ—à–µ–Ω–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ—Ç–≤–µ—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
### –û—Ç–≤–µ—Ç 1: –û—Ç–¥–µ–ª—å–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–ª–æ—è
- AI –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —Å–ª–æ—è —Å —É—á—ë—Ç–æ–º –µ–≥–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ
- Preview –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–∞–±–ª–∏—Ü—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–ª–æ—è
- –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç –≤—Å–µ —Å–ª–æ–∏ —Å—Ä–∞–∑—É
### –û—Ç–≤–µ—Ç 2: Prompts –≤–Ω—É—Ç—Ä–∏ Generate (Recommended)
- –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É 'Load Saved Prompt' –≤ Generate panel
- –£–±—Ä–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—É—é –≤–∫–ª–∞–¥–∫—É Prompts
- –ö–æ–º–ø–∞–∫—Ç–Ω–µ–µ –∏ –ª–æ–≥–∏—á–Ω–µ–µ
### –û—Ç–≤–µ—Ç 3: –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å Style/AI —Ä–µ–∂–∏–º—ã (Recommended)
- Radio buttons: 'Style Mode' (—Ç–µ–∫—É—â–∏–π) –∏ 'AI Mode'
- –í AI mode: –ø—Ä–æ–º–ø—Ç –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏—è –ª–æ–≥–∏–∫–∏ + –ø—Ä–µ–≤—å—é –∫–∞–∫ —Å–µ–π—á–∞—Å
- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∏–º–µ–Ω–∞ —á–µ—Ä–µ–∑ –∞–∫—Ç–∏–≤–Ω—ã–π AI –ø—Ä–æ–≤–∞–π–¥–µ—Ä
---
## –î–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω —Ä–µ—à–µ–Ω–∏–π
### –ó–∞–¥–∞—á–∞ 1: Multi-field –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å preview —Ç–∞–±–ª–∏—Ü–µ–π
**–ü—Ä–æ–±–ª–µ–º–∞:** –°–µ–π—á–∞—Å –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è –æ–¥–Ω–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
**–†–µ—à–µ–Ω–∏–µ:**
1. **UI –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ `GeneratePanel.ts`:**
   - –î–æ–±–∞–≤–∏—Ç—å —Å–µ–∫—Ü–∏—é "Selected Layers" —Å —Å–ø–∏—Å–∫–æ–º –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–ª–æ—ë–≤
   - –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∏–º–µ–Ω–∞ —Å–ª–æ—ë–≤ –∏ –∏—Ö —Ç–µ–∫—É—â–∏–π —Ç–µ–∫—Å—Ç (preview)
   - –ö–Ω–æ–ø–∫–∞ "Refresh Selection" –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞
2. **–ù–æ–≤—ã–π output —Ä–µ–∂–∏–º - —Ç–∞–±–ª–∏—Ü–∞:**
   - –ó–∞–º–µ–Ω–∏—Ç—å textarea –Ω–∞ —Ç–∞–±–ª–∏—Ü—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
   - –ö–æ–ª–æ–Ω–∫–∏: Layer Name | Original Text | Generated Text | Status
   - –ö–∞–∂–¥–∞—è —Å—Ç—Ä–æ–∫–∞ - –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–ª–æ–π
   - Streaming –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ —Å–ª–æ—è
3. **Sandbox –æ–±—Ä–∞–±–æ—Ç–∫–∞:**
   - –ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ `generate-multi` –≤–º–µ—Å—Ç–æ `generate-text`
   - –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–ª–æ—è:
     - –ü—Ä–æ–º–ø—Ç: `{userPrompt}\n\nOriginal text: {layerText}`
     - –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç –æ—Å—Ç–∞—ë—Ç—Å—è –æ–±—â–∏–º
   - –û—Ç–ø—Ä–∞–≤–∫–∞ `generation-multi-chunk` —Å –Ω–æ–º–µ—Ä–æ–º —Å–ª–æ—è
   - –§–∏–Ω–∞–ª—å–Ω–æ–µ `generation-multi-complete` —Å –ø–æ–ª–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ–π
4. **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:**
   - Apply button –ø—Ä–∏–º–µ–Ω—è–µ—Ç –í–°–ï —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ–∫—Å—Ç—ã –∫ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º —Å–ª–æ—è–º
   - Checkbox –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–∏ - –º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –∫–∞–∫–∏–µ –ø—Ä–∏–º–µ–Ω–∏—Ç—å
**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã:**
- `src/ui/panels/GeneratePanel.ts` - UI –ª–æ–≥–∏–∫–∞
- `src/sandbox/code.ts` - handler `handleGenerateMulti()`
- `src/shared/messages.ts` - –Ω–æ–≤—ã–µ —Ç–∏–ø—ã —Å–æ–æ–±—â–µ–Ω–∏–π
- `src/ui/index.html` - –Ω–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞ –≤–º–µ—Å—Ç–æ textarea
---
### –ó–∞–¥–∞—á–∞ 2: Prompts Library –≤ Generate panel
**–ü—Ä–æ–±–ª–µ–º–∞:** Prompts - –æ—Ç–¥–µ–ª—å–Ω–∞—è –≤–∫–ª–∞–¥–∫–∞, –Ω–æ –ª–æ–≥–∏—á–Ω–µ–µ –≤ Generate
**–†–µ—à–µ–Ω–∏–µ:**
1. **–ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å UI:**
   - –£–¥–∞–ª–∏—Ç—å –≤–∫–ª–∞–¥–∫—É "Prompts" –∏–∑ tabs
   - –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É "üìö Saved Prompts" —Ä—è–¥–æ–º —Å –ø–æ–ª–µ–º Prompt –≤ Generate
   - –ö–ª–∏–∫ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å PromptsPanel —Å–æ–¥–µ—Ä–∂–∏–º—ã–º
2. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Edit –ø—Ä–æ–º–ø—Ç–æ–≤:**
   - –í `PromptsPanel.ts` –∑–∞–º–µ–Ω–∏—Ç—å `alert()` –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π –¥–∏–∞–ª–æ–≥
   - –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –ø–æ–ª—è–º–∏: name, content, category, tags
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ `save-prompt` —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º ID (update)
3. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**
   - PromptsPanel –æ—Å—Ç–∞—ë—Ç—Å—è –∫–∞–∫ –º–æ–¥—É–ª—å–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∫–Ω–æ–ø–∫—É
   - –ü–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ –ø—Ä–æ–º–ø—Ç–∞ - –∑–∞–∫—Ä—ã–≤–∞–µ—Ç –æ–∫–Ω–æ –∏ –≤—Å—Ç–∞–≤–ª—è–µ—Ç –≤ –ø–æ–ª–µ
**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã:**
- `src/ui/index.html` - —É–±—Ä–∞—Ç—å –≤–∫–ª–∞–¥–∫—É, –¥–æ–±–∞–≤–∏—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
- `src/ui/panels/GeneratePanel.ts` - –∫–Ω–æ–ø–∫–∞ –∏ –ª–æ–≥–∏–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª–∞
- `src/ui/panels/PromptsPanel.ts` - —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å showEditDialog()
- `src/ui/main.ts` - –æ–±–Ω–æ–≤–∏—Ç—å –ø–æ—Ä—è–¥–æ–∫ —Ç–∞–±–æ–≤
---
### –ó–∞–¥–∞—á–∞ 3: AI —Ä–µ–∂–∏–º –≤ Rename panel
**–ü—Ä–æ–±–ª–µ–º–∞:** –¢–æ–ª—å–∫–æ —Å—Ç–∏–ª–∏–∑–∞—Ü–∏—è, –Ω–µ—Ç AI –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è
**–†–µ—à–µ–Ω–∏–µ:**
1. **UI –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ä–µ–∂–∏–º–æ–≤:**
   ```html
   <div class="rename-mode-selector">
     <input type="radio" name="rename-mode" value="style" checked>
     <label>Style Mode (BEM, camelCase...)</label>
     <input type="radio" name="rename-mode" value="ai">
     <label>AI Smart Rename</label>
   </div>
   ```
2. **Style Mode (—Ç–µ–∫—É—â–∏–π):**
   - –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–µ—Å–µ—Ç—ã (BEM, camelCase, snakeCase, kebabCase)
   - –í—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Å–µ–π—á–∞—Å
3. **AI Mode (–Ω–æ–≤—ã–π):**
   - –°–∫—Ä—ã—Ç—å –ø—Ä–µ—Å–µ—Ç—ã
   - –ü–æ–∫–∞–∑–∞—Ç—å:
     - Textarea –¥–ª—è –ø—Ä–æ–º–ø—Ç–∞ (–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –∫–∞–∫ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤—ã–≤–∞—Ç—å)
     - Checkbox "Include parent hierarchy" - —É—á–∏—Ç—ã–≤–∞—Ç—å –∏–µ—Ä–∞—Ä—Ö–∏—é —Å–ª–æ—ë–≤
     - Preview –∫–Ω–æ–ø–∫–∞
   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è:
     - –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–ª–æ—è –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å –∫ AI —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º:
       ```
       Rename this layer based on the following rules:
       {user_prompt}
       Current name: {old_name}
       Layer type: {type}
       Parent: {parent_name}
       Children: {children_names}
       ```
     - AI –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–æ–≤–æ–µ –∏–º—è
     - Preview –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–∞–±–ª–∏—Ü—É –∏–∑–º–µ–Ω–µ–Ω–∏–π –∫–∞–∫ –æ–±—ã—á–Ω–æ
4. **Sandbox –æ–±—Ä–∞–±–æ—Ç–∫–∞:**
   - –ù–æ–≤—ã–π handler `handleAIRenamePreview()`
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä –∏–∑ settings
   - –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–º—ë–Ω –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–ª–æ—è
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç RenamePreview[] –∫–∞–∫ –æ–±—ã—á–Ω–æ
**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã:**
- `src/ui/panels/RenamePanel.ts` - UI –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ä–µ–∂–∏–º–æ–≤
- `src/sandbox/rename-handler.ts` - –Ω–æ–≤—ã–π –º–µ—Ç–æ–¥ handleAIPreview()
- `src/shared/messages.ts` - –Ω–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ `ai-rename-preview`
- `src/ui/index.html` - HTML –¥–ª—è AI mode —Å–µ–∫—Ü–∏–∏
---
### –ó–∞–¥–∞—á–∞ 4: –ò–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä—è–¥–æ–∫ –≤–∫–ª–∞–¥–æ–∫
**–¢–µ–∫—É—â–∏–π:** Generate ‚Üí Settings ‚Üí Data ‚Üí Rename ‚Üí Prompts ‚Üí Help
**–¢—Ä–µ–±—É–µ–º—ã–π:** Generate ‚Üí Data ‚Üí Rename ‚Üí Settings ‚Üí Help
**–†–µ—à–µ–Ω–∏–µ:**
–ü—Ä–æ—Å—Ç–æ –ø–æ–º–µ–Ω—è—Ç—å –ø–æ—Ä—è–¥–æ–∫ –≤ `src/ui/index.html`:
```html
<div class="tabs">
  <button class="tab active" data-tab="generate">Generate</button>
  <button class="tab" data-tab="data">Data</button>
  <button class="tab" data-tab="rename">Rename</button>
  <button class="tab" data-tab="settings">Settings</button>
  <button class="tab" data-tab="help">Help</button>
</div>
```
Prompts —É–±–∏—Ä–∞–µ–º (—Ç–µ–ø–µ—Ä—å –≤ Generate).
**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã:**
- `src/ui/index.html` - –ø–æ—Ä—è–¥–æ–∫ –≤–∫–ª–∞–¥–æ–∫
---
## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –Ω–æ–≤—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
### Multi-field Generation Architecture
**–ù–æ–≤—ã–µ —Ç–∏–ø—ã —Å–æ–æ–±—â–µ–Ω–∏–π** (`src/shared/messages.ts`):
```typescript
// UI ‚Üí Sandbox
interface GenerateMultiRequest {
  type: 'generate-multi';
  id: string;
  providerId: string;
  prompt: string;              // –û—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ–º–ø—Ç-–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
  systemPrompt?: string;
  settings: GenerationSettings;
  layers: Array<{              // –°–ø–∏—Å–æ–∫ —Å–ª–æ—ë–≤
    id: string;
    name: string;
    originalText: string;
  }>;
}
// Sandbox ‚Üí UI (chunk –¥–ª—è –æ–¥–Ω–æ–≥–æ —Å–ª–æ—è)
interface GenerationMultiChunkResponse {
  type: 'generation-multi-chunk';
  id: string;
  layerIndex: number;          // –ò–Ω–¥–µ–∫—Å —Ç–µ–∫—É—â–µ–≥–æ —Å–ª–æ—è
  chunk: string;               // –ö—É—Å–æ–∫ —Ç–µ–∫—Å—Ç–∞
  tokens: number;
}
// Sandbox ‚Üí UI (–∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –≤—Å–µ—Ö —Å–ª–æ—ë–≤)
interface GenerationMultiCompleteResponse {
  type: 'generation-multi-complete';
  id: string;
  results: Array<{
    layerId: string;
    text: string;
    tokens: number;
    cost: number;
  }>;
  totalTokens: number;
  totalCost: number;
}
```
**Sandbox handler** (`src/sandbox/code.ts`):
```typescript
private async handleGenerateMulti(message: GenerateMultiRequest): Promise<void> {
  const settings = await this.storageManager.loadSettings();
  const config = settings.providerConfigs.find(c => c.id === message.providerId);
  const results = [];
  let totalTokens = 0;
  let totalCost = 0;
  // –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–∞–∂–¥–æ–≥–æ —Å–ª–æ—è
  for (let i = 0; i < message.layers.length; i++) {
    const layer = message.layers[i];
    // –§–æ—Ä–º–∏—Ä—É–µ–º –ø—Ä–æ–º–ø—Ç —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º —Å–ª–æ—è
    const contextPrompt = `${message.prompt}\n\nOriginal text from layer "${layer.name}":\n${layer.originalText}`;
    let layerText = '';
    let layerTokens = 0;
    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å streaming
    await this.apiClient.generateText({
      providerId: message.providerId,
      prompt: contextPrompt,
      systemPrompt: message.systemPrompt,
      settings: message.settings,
      signal: abortSignal,
      onChunk: (chunk: string, tokens: number) => {
        layerText += chunk;
        layerTokens = tokens;
        // –û—Ç–ø—Ä–∞–≤–∏—Ç—å chunk –≤ UI
        sendToUI({
          type: 'generation-multi-chunk',
          id: message.id,
          layerIndex: i,
          chunk,
          tokens
        });
      }
    });
    results.push({
      layerId: layer.id,
      text: layerText,
      tokens: layerTokens,
      cost: this.calculateCost(message.providerId, layerTokens)
    });
    totalTokens += layerTokens;
    totalCost += results[results.length - 1].cost;
  }
  // –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ñ–∏–Ω–∞–ª—å–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
  sendToUI({
    type: 'generation-multi-complete',
    id: message.id,
    results,
    totalTokens,
    totalCost
  });
}
```
---
### AI Rename Architecture
**–ù–æ–≤—ã–µ —Ç–∏–ø—ã —Å–æ–æ–±—â–µ–Ω–∏–π** (`src/shared/messages.ts`):
```typescript
// UI ‚Üí Sandbox
interface AIRenamePreviewRequest {
  type: 'ai-rename-preview';
  id: string;
  prompt: string;              // –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –∫–∞–∫ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤—ã–≤–∞—Ç—å
  includeHierarchy: boolean;   // –£—á–∏—Ç—ã–≤–∞—Ç—å —Ä–æ–¥–∏—Ç–µ–ª–µ–π/–¥–µ—Ç–µ–π
}
// Sandbox ‚Üí UI
interface AIRenamePreviewResponse {
  type: 'ai-rename-preview-result';
  id: string;
  previews: RenamePreview[];   // –¢–æ—Ç –∂–µ —Ñ–æ—Ä–º–∞—Ç —á—Ç–æ –∏ –æ–±—ã—á–Ω—ã–π rename
}
```
**Sandbox handler** (`src/sandbox/rename-handler.ts`):
```typescript
async handleAIPreview(prompt: string, includeHierarchy: boolean): Promise<void> {
  const selection = figma.currentPage.selection;
  if (selection.length === 0) {
    throw new Error('No layers selected');
  }
  // –°–æ–±—Ä–∞—Ç—å –≤—Å–µ —É–∑–ª—ã –¥–ª—è –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è
  const nodesToRename = [];
  for (const node of selection) {
    collectNodesToRename(node, nodesToRename);
  }
  const settings = await this.storageManager.loadSettings();
  const config = settings.providerConfigs.find(c => c.id === settings.activeProviderId);
  const previews: RenamePreview[] = [];
  // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –∏–º–µ–Ω–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —É–∑–ª–∞
  for (const node of nodesToRename) {
    // –§–æ—Ä–º–∏—Ä—É–µ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç
    let context = `Current name: ${node.name}\nLayer type: ${node.type}`;
    if (includeHierarchy && node.parent) {
      context += `\nParent: ${node.parent.name}`;
      if ('children' in node && node.children.length > 0) {
        const childNames = node.children.map(c => c.name).join(', ');
        context += `\nChildren: ${childNames}`;
      }
    }
    // –ü—Ä–æ–º–ø—Ç –¥–ª—è AI
    const fullPrompt = `${prompt}\n\n${context}\n\nProvide ONLY the new name, nothing else.`;
    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ API
    const result = await this.apiClient.generateText({
      providerId: settings.activeProviderId,
      prompt: fullPrompt,
      systemPrompt: 'You are a layer naming expert. Provide concise, clear layer names.',
      settings: { temperature: 0.3, maxTokens: 50 }
    });
    const newName = result.text.trim();
    previews.push({
      nodeId: node.id,
      nodeName: node.name,
      oldName: node.name,
      newName,
      nodeType: node.type,
      depth: 0  // TODO: calculate depth
    });
  }
  sendToUI({
    type: 'ai-rename-preview-result',
    id: message.id,
    previews
  });
}
```
---
## –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (–ø–æ—Ä—è–¥–æ–∫ –∑–∞–¥–∞—á)
### Phase 1: –ü—Ä–æ—Å—Ç—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (30 –º–∏–Ω—É—Ç)
**‚úÖ –ß–ê–°–¢–ò–ß–ù–û –í–´–ü–û–õ–ù–ï–ù–û (3/6 –ø–æ–¥–∑–∞–¥–∞—á –≥–æ—Ç–æ–≤–æ)**
1. ‚úÖ **–ü–æ—Ä—è–¥–æ–∫ –≤–∫–ª–∞–¥–æ–∫** (–í–´–ü–û–õ–ù–ï–ù–û):
   - ‚úÖ –ò–∑–º–µ–Ω—ë–Ω `src/ui/index.html` —Å—Ç—Ä–æ–∫–∏ 10-16
   - ‚úÖ –£–±—Ä–∞–Ω–∞ –≤–∫–ª–∞–¥–∫–∞ Prompts
   - ‚úÖ –ù–æ–≤—ã–π –ø–æ—Ä—è–¥–æ–∫: Generate ‚Üí Data ‚Üí Rename ‚Üí Settings ‚Üí Help
2. ‚úÖ **–ö–Ω–æ–ø–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∞** (–í–´–ü–û–õ–ù–ï–ù–û):
   - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ "üìö Saved Prompts" –≤ `src/ui/index.html` —Å—Ç—Ä–æ–∫–∞ 23
   - –†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∞ —Ä—è–¥–æ–º —Å "Get Selected Text"
3. ‚è≥ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∫–Ω–æ–ø–∫–∏ —Å PromptsPanel** (–û–°–¢–ê–õ–û–°–¨):
   **–§–∞–π–ª:** `src/ui/panels/GeneratePanel.ts`
   **–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
   - –î–æ–±–∞–≤–∏—Ç—å –≤ `setupEventListeners()` –ø–æ—Å–ª–µ —Å—Ç—Ä–æ–∫–∏ 56:
     ```typescript
     document.getElementById('saved-prompts-btn')?.addEventListener('click', () => {
       this.openPromptsModal();
     });
     ```
   - –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ `openPromptsModal()`:
     ```typescript
     private openPromptsModal(): void {
       const promptsPanel = document.getElementById('prompts-panel');
       if (promptsPanel) {
         promptsPanel.style.display = 'block';
       }
     }
     ```
4. ‚è≥ **–ü—Ä–µ–≤—Ä–∞—Ç–∏—Ç—å Prompts Panel –≤ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ** (–û–°–¢–ê–õ–û–°–¨):
   **–§–∞–π–ª:** `src/ui/index.html`
   **–ù–∞–π—Ç–∏:** `<div id="prompts-panel" class="panel">` (–æ–∫–æ–ª–æ —Å—Ç—Ä–æ–∫–∏ 196)
   **–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
   - –ò–∑–º–µ–Ω–∏—Ç—å class —Å `panel` –Ω–∞ `modal`
   - –î–æ–±–∞–≤–∏—Ç—å `style="display: none;"` –¥–ª—è —Å–∫—Ä—ã—Ç–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
   - –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É –∑–∞–∫—Ä—ã—Ç–∏—è –≤ header:
     ```html
     <div class="modal-header">
       <h3>Saved Prompts Library</h3>
       <button id="close-prompts-modal" class="btn-close">√ó</button>
     </div>
     ```
   **–§–∞–π–ª:** `src/ui/panels/PromptsPanel.ts`
   - –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∑–∞–∫—Ä—ã—Ç–∏—è –≤ `setupEventListeners()`:
     ```typescript
     document.getElementById('close-prompts-modal')?.addEventListener('click', () => {
       this.closeModal();
     });
     ```
   - –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥:
     ```typescript
     private closeModal(): void {
       const modal = document.getElementById('prompts-panel');
       if (modal) {
         modal.style.display = 'none';
       }
     }
     ```
   - –û–±–Ω–æ–≤–∏—Ç—å `usePrompt()` (—Å—Ç—Ä–æ–∫–∞ 186) - –¥–æ–±–∞–≤–∏—Ç—å –∑–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª–∞ –ø–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞:
     ```typescript
     this.closeModal();  // –¥–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ–Ω–µ—Ü –º–µ—Ç–æ–¥–∞
     ```
5. ‚è≥ **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Edit –¥–∏–∞–ª–æ–≥** (–û–°–¢–ê–õ–û–°–¨):
   **–§–∞–π–ª:** `src/ui/panels/PromptsPanel.ts`, —Å—Ç—Ä–æ–∫–∞ 213
   **–ó–∞–º–µ–Ω–∏—Ç—å –º–µ—Ç–æ–¥ `editPrompt()`:**
   ```typescript
   private editPrompt(prompt: SavedPrompt): void {
     // –ü—Ä–æ—Å—Ç–æ–π –¥–∏–∞–ª–æ–≥ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (–∏—Å–ø–æ–ª—å–∑—É–µ–º browser prompt)
     const name = window.prompt('Edit prompt name:', prompt.name);
     if (name === null) return; // –û—Ç–º–µ–Ω–∞
     const content = window.prompt('Edit prompt content:', prompt.content);
     if (content === null) return; // –û—Ç–º–µ–Ω–∞
     const category = window.prompt(
       'Edit category (Marketing, Technical, Creative, General):',
       prompt.category || 'General'
     );
     if (category === null) return; // –û—Ç–º–µ–Ω–∞
     const tagsInput = window.prompt(
       'Edit tags (comma-separated):',
       prompt.tags?.join(', ') || ''
     );
     const tags = tagsInput
       ? tagsInput.split(',').map((t) => t.trim()).filter((t) => t.length > 0)
       : [];
     // –°–æ–∑–¥–∞—ë–º –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π –ø—Ä–æ–º–ø—Ç (ID —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è!)
     const updatedPrompt: SavedPrompt = {
       ...prompt,
       name: name.trim(),
       content: content.trim(),
       category: category.trim(),
       tags,
       updatedAt: Date.now(),
     };
     // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤ sandbox (–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º—É ID)
     sendToSandbox({
       type: 'save-prompt',
       prompt: updatedPrompt,
     });
     this.showSuccess(`Prompt "${updatedPrompt.name}" updated`);
   }
   ```
6. ‚è≥ **–£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ sandbox –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç update** (–û–°–¢–ê–õ–û–°–¨):
   **–§–∞–π–ª:** `src/sandbox/prompts-handler.ts`
   **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:** –ú–µ—Ç–æ–¥ `handleSavePrompt()` —É–∂–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç update (—Å—Ç—Ä–æ–∫–∏ 28-51)
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–∞ –ø–æ ID
   - ‚úÖ –û–±–Ω–æ–≤–ª—è–µ—Ç –µ—Å–ª–∏ –Ω–∞–π–¥–µ–Ω, —Å–æ–∑–¥–∞—ë—Ç –µ—Å–ª–∏ –Ω–µ—Ç
   - ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ —É–∂–µ –µ—Å—Ç—å!
---
### Phase 2: Multi-field –≥–µ–Ω–µ—Ä–∞—Ü–∏—è (2-3 —á–∞—Å–∞)
1. **UI –¥–ª—è –≤—ã–±–æ—Ä–∞ —Å–ª–æ—ë–≤** (45 –º–∏–Ω—É—Ç):
   - –î–æ–±–∞–≤–∏—Ç—å —Å–µ–∫—Ü–∏—é "Selected Layers" –≤ GeneratePanel
   - –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å–ø–∏—Å–æ–∫ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–ª–æ—ë–≤ —Å preview
   - –ö–Ω–æ–ø–∫–∞ "Refresh Selection"
2. **–¢–∞–±–ª–∏—Ü–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤** (45 –º–∏–Ω—É—Ç):
   - –ó–∞–º–µ–Ω–∏—Ç—å output textarea –Ω–∞ —Ç–∞–±–ª–∏—Ü—É
   - –ö–æ–ª–æ–Ω–∫–∏: Layer | Original | Generated | Status
   - Streaming –æ–±–Ω–æ–≤–ª—è–µ—Ç —Ç–µ–∫—É—â—É—é —Å—Ç—Ä–æ–∫—É
3. **Sandbox –æ–±—Ä–∞–±–æ—Ç–∫–∞** (60 –º–∏–Ω—É—Ç):
   - –ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ `generate-multi`
   - Handler `handleGenerateMulti()` —Å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π
   - Chunk response –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–ª–æ—è
   - Apply –ø—Ä–∏–º–µ–Ω—è–µ—Ç –í–°–ï —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
4. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** (30 –º–∏–Ω—É—Ç):
   - –í—ã–±—Ä–∞—Ç—å 3-5 —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–ª–æ—ë–≤
   - –í–≤–µ—Å—Ç–∏ –ø—Ä–æ–º–ø—Ç "Translate to English"
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∫–∞–∂–¥—ã–π —Å–ª–æ–π –æ–±—Ä–∞–±–æ—Ç–∞–ª—Å—è
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Apply
---
### Phase 3: AI Rename (1.5-2 —á–∞—Å–∞)
1. **UI –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ä–µ–∂–∏–º–æ–≤** (30 –º–∏–Ω—É—Ç):
   - Radio buttons: Style Mode / AI Mode
   - –ü–æ–∫–∞–∑–∞—Ç—å/—Å–∫—Ä—ã—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —Å–µ–∫—Ü–∏–∏
2. **AI Mode UI** (30 –º–∏–Ω—É—Ç):
   - Textarea –¥–ª—è –ø—Ä–æ–º–ø—Ç–∞
   - Checkbox "Include hierarchy"
   - Preview –∫–Ω–æ–ø–∫–∞ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –ª–æ–≥–∏–∫—É)
3. **Sandbox AI handler** (45 –º–∏–Ω—É—Ç):
   - –ù–æ–≤—ã–π –º–µ—Ç–æ–¥ `handleAIPreview()` –≤ RenameHandler
   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–º—ë–Ω —á–µ—Ä–µ–∑ –∞–∫—Ç–∏–≤–Ω—ã–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä
   - –í–æ–∑–≤—Ä–∞—Ç RenamePreview[]
4. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** (15 –º–∏–Ω—É—Ç):
   - –í—ã–±—Ä–∞—Ç—å Frame —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Å–ª–æ—è–º–∏
   - AI Mode: –ø—Ä–æ–º–ø—Ç "Use semantic names based on content"
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å preview
   - –ü—Ä–∏–º–µ–Ω–∏—Ç—å
---
### Phase 4: –§–∏–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (30 –º–∏–Ω—É—Ç)
**E2E —Ç–µ—Å—Ç—ã –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π:**
1. Multi-field –≥–µ–Ω–µ—Ä–∞—Ü–∏—è:
   - –í—ã–±—Ä–∞—Ç—å 5 —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–ª–æ—ë–≤ —Å —Ä–∞–∑–Ω—ã–º —Å–æ–¥–µ—Ä–∂–∏–º—ã–º
   - –ü—Ä–æ–º–ø—Ç: "Make this more professional"
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤—Å–µ —Å–ª–æ–∏ –æ–±—Ä–∞–±–æ—Ç–∞–ª–∏—Å—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
   - Apply –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ Figma
2. Prompts Library:
   - –û—Ç–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∏–∑ Generate
   - –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –ø—Ä–æ–º–ø—Ç
   - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π (Edit)
   - –£–¥–∞–ª–∏—Ç—å –ø—Ä–æ–º–ø—Ç
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ–º–ø—Ç
3. AI Rename:
   - Style Mode: –ø—Ä–∏–º–µ–Ω–∏—Ç—å BEM –∫ Frame
   - AI Mode: –ø—Ä–æ–º–ø—Ç "Use descriptive names"
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å preview
   - –ü—Ä–∏–º–µ–Ω–∏—Ç—å
4. –ü–æ—Ä—è–¥–æ–∫ –≤–∫–ª–∞–¥–æ–∫:
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –ø–æ—Ä—è–¥–æ–∫: Generate ‚Üí Data ‚Üí Rename ‚Üí Settings ‚Üí Help
   - Prompts –Ω–µ—Ç –≤ –≤–∫–ª–∞–¥–∫–∞—Ö
5. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞:
   - –í—Å–µ 25 –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ Settings
   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç (–æ–¥–∏–Ω —Å–ª–æ–π)
   - Data presets —Ä–∞–±–æ—Ç–∞—é—Ç
   - Batch processor —Ä–∞–±–æ—Ç–∞–µ—Ç
   - i18n –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
---
## –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è
### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: Multi-field –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
1. **`src/ui/index.html`**:
   - –î–æ–±–∞–≤–∏—Ç—å —Å–µ–∫—Ü–∏—é Selected Layers
   - –ó–∞–º–µ–Ω–∏—Ç—å output textarea –Ω–∞ —Ç–∞–±–ª–∏—Ü—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
2. **`src/ui/panels/GeneratePanel.ts`**:
   - –ú–µ—Ç–æ–¥ `refreshSelectedLayers()` - –æ–±–Ω–æ–≤–∏—Ç—å —Å–ø–∏—Å–æ–∫
   - –ú–µ—Ç–æ–¥ `handleGenerateMulti()` - –æ—Ç–ø—Ä–∞–≤–∏—Ç—å multi request
   - –ú–µ—Ç–æ–¥ `handleMultiChunk()` - –æ–±–Ω–æ–≤–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É
   - –ú–µ—Ç–æ–¥ `handleMultiComplete()` - —Ñ–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è
   - –ú–µ—Ç–æ–¥ `handleApplyMulti()` - –ø—Ä–∏–º–µ–Ω–∏—Ç—å –≤—Å–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
3. **`src/sandbox/code.ts`**:
   - Handler `handleGenerateMulti()` - –æ—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞
   - –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–ª–æ—ë–≤ —Å streaming
4. **`src/shared/messages.ts`**:
   - `GenerateMultiRequest`
   - `GenerationMultiChunkResponse`
   - `GenerationMultiCompleteResponse`
---
### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: Prompts –≤ Generate
5. **`src/ui/index.html`**:
   - –£–±—Ä–∞—Ç—å –≤–∫–ª–∞–¥–∫—É Prompts –∏–∑ tabs
   - –î–æ–±–∞–≤–∏—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è prompts library
   - –ö–Ω–æ–ø–∫–∞ "üìö Saved Prompts" –≤ Generate panel
6. **`src/ui/panels/GeneratePanel.ts`**:
   - –ú–µ—Ç–æ–¥ `openPromptsModal()` - –ø–æ–∫–∞–∑–∞—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å PromptsPanel
7. **`src/ui/panels/PromptsPanel.ts`**:
   - –ú–µ—Ç–æ–¥ `showEditDialog()` - —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤–º–µ—Å—Ç–æ alert()
   - HTML —Ñ–æ—Ä–º–∞ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
---
### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: AI Rename
8. **`src/ui/index.html`**:
   - Radio buttons –¥–ª—è —Ä–µ–∂–∏–º–æ–≤ (Style/AI)
   - HTML –¥–ª—è AI Mode —Å–µ–∫—Ü–∏–∏ (prompt textarea, checkbox)
9. **`src/ui/panels/RenamePanel.ts`**:
   - –ú–µ—Ç–æ–¥ `switchMode()` - –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ UI
   - –ú–µ—Ç–æ–¥ `handleAIPreview()` - –æ—Ç–ø—Ä–∞–≤–∫–∞ AI rename request
10. **`src/sandbox/rename-handler.ts`**:
    - –ú–µ—Ç–æ–¥ `handleAIPreview()` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–º—ë–Ω —á–µ—Ä–µ–∑ AI
    - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
11. **`src/shared/messages.ts`**:
    - `AIRenamePreviewRequest`
    - `AIRenamePreviewResponse`
---
### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 4: –ü–æ—Ä—è–¥–æ–∫ –≤–∫–ª–∞–¥–æ–∫
12. **`src/ui/index.html`**:
    - –ò–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä—è–¥–æ–∫ –≤–∫–ª–∞–¥–æ–∫ –≤ HTML
---
## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏—Å—Ö–æ–¥–Ω–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞
**–ü–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
‚úÖ **V2 Provider Architecture:**
- 25 –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ –¥–æ—Å—Ç—É–ø–Ω—ã
- –°–æ–∑–¥–∞–Ω–∏–µ/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- Custom pricing —Ä–∞–±–æ—Ç–∞–µ—Ç
‚úÖ **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞:**
- –û–¥–∏–Ω —Å–ª–æ–π (—Å—Ç–∞—Ä—ã–π —Ä–µ–∂–∏–º) —Ä–∞–±–æ—Ç–∞–µ—Ç
- Streaming —Ä–∞–±–æ—Ç–∞–µ—Ç
- Cancel —Ä–∞–±–æ—Ç–∞–µ—Ç
- Apply to Selection —Ä–∞–±–æ—Ç–∞–µ—Ç
- Token counting —Ä–∞–±–æ—Ç–∞–µ—Ç
‚úÖ **Data Presets:**
- –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–µ—Å–µ—Ç–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- Quick apply —Ä–∞–±–æ—Ç–∞–µ—Ç
‚úÖ **Rename (Style Mode):**
- BEM, camelCase, snakeCase, kebabCase —Ä–∞–±–æ—Ç–∞—é—Ç
- Preview –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è
- Apply –ø—Ä–∏–º–µ–Ω—è–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è
‚úÖ **Batch Processing:**
- –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ —Å–ª–æ—ë–≤
- –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
‚úÖ **i18n:**
- –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —è–∑—ã–∫–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç (en/ru/ja)
- –í—Å–µ –ø–µ—Ä–µ–≤–æ–¥—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è
- UI –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
‚úÖ **Storage:**
- Settings —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ clientStorage
- Prompts library —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è
- Data presets —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è
- Rename settings —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è
---
## –†–∏—Å–∫–∏ –∏ –º–∏—Ç–∏–≥–∞—Ü–∏—è
### –†–∏—Å–∫ 1: Multi-field –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–¥–ª–µ–Ω–Ω–æ–π
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ 10+ —Å–ª–æ—ë–≤ –∑–∞–π–º—ë—Ç –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:**
- –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–ª–æ—è
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å Cancel –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å fast –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã (GPT-4o Mini, Gemini Flash)
---
### –†–∏—Å–∫ 2: AI Rename –º–æ–∂–µ—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –∏–º–µ–Ω–∞
**–ü—Ä–æ–±–ª–µ–º–∞:** AI –º–æ–∂–µ—Ç –≤–µ—Ä–Ω—É—Ç—å —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω–æ–µ –∏–º—è –∏–ª–∏ —Å –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–º–∏ —Å–∏–º–≤–æ–ª–∞–º–∏
**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:**
- Preview –ø–µ—Ä–µ–¥ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º (—É–∂–µ –µ—Å—Ç—å)
- –í–∞–ª–∏–¥–∞—Ü–∏—è –∏–º–µ–Ω–∏ –ø–µ—Ä–µ–¥ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º (—É–±—Ä–∞—Ç—å —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª—ã)
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–ª–∏–Ω—ã –∏–º–µ–Ω–∏ (–º–∞–∫—Å 100 —Å–∏–º–≤–æ–ª–æ–≤)
- Fallback –Ω–∞ —Å—Ç–∞—Ä–æ–µ –∏–º—è –µ—Å–ª–∏ AI –≤–µ—Ä–Ω—É–ª –ø—É—Å—Ç–æ—Ç—É
---
### –†–∏—Å–∫ 3: Prompts modal –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–∏–º
**–ü—Ä–æ–±–ª–µ–º–∞:** –ï—Å–ª–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç 50+ –ø—Ä–æ–º–ø—Ç–æ–≤, –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –±—É–¥–µ—Ç –æ–≥—Ä–æ–º–Ω—ã–º
**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:**
- –ü–∞–≥–∏–Ω–∞—Ü–∏—è –∏–ª–∏ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π —Å–∫—Ä–æ–ª–ª–∏–Ω–≥
- –§–∏–ª—å—Ç—Ä—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º (—É–∂–µ –µ—Å—Ç—å –≤ PromptsPanel)
- –ü–æ–∏—Å–∫ (—É–∂–µ –µ—Å—Ç—å –≤ PromptsPanel)
---
## –§–∏–Ω–∞–ª—å–Ω–∞—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è
### –¢–µ—Å—Ç 1: Multi-field –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
```
1. –°–æ–∑–¥–∞—Ç—å Frame —Å 5 TEXT —Å–ª–æ—è–º–∏: "Hello", "World", "Figma", "Plugin", "Test"
2. –í—ã–±—Ä–∞—Ç—å Frame
3. –ü—Ä–æ–º–ø—Ç: "Translate to Russian"
4. Generate ‚Üí Multi Mode
5. ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–∞–±–ª–∏—Ü–∞ —Å 5 —Å—Ç—Ä–æ–∫–∞–º–∏
6. ‚úÖ –ö–∞–∂–¥–∞—è —Å—Ç—Ä–æ–∫–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø–æ –º–µ—Ä–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
7. ‚úÖ Apply –ø—Ä–∏–º–µ–Ω—è–µ—Ç –≤—Å–µ –ø–µ—Ä–µ–≤–æ–¥—ã
8. ‚úÖ –í Figma –≤—Å–µ —Å–ª–æ–∏ –ø–µ—Ä–µ–≤–µ–¥–µ–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
```
### –¢–µ—Å—Ç 2: Prompts –≤ Generate
```
1. Generate panel ‚Üí –∫–Ω–æ–ø–∫–∞ "üìö Saved Prompts"
2. –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
3. ‚úÖ –°–ø–∏—Å–æ–∫ –ø—Ä–æ–º–ø—Ç–æ–≤ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
4. –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –ø—Ä–æ–º–ø—Ç "Test Prompt"
5. ‚úÖ –ü—Ä–æ–º–ø—Ç —Å–æ—Ö—Ä–∞–Ω–∏–ª—Å—è
6. Edit "Test Prompt"
7. ‚úÖ –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Ñ–æ—Ä–º–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (–ù–ï alert!)
8. –ò–∑–º–µ–Ω–∏—Ç—å content
9. ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–∏–ª–∏—Å—å
10. Use "Test Prompt"
11. ‚úÖ –ü—Ä–æ–º–ø—Ç –≤—Å—Ç–∞–≤–∏–ª—Å—è –≤ –ø–æ–ª–µ, –º–æ–¥–∞–ª –∑–∞–∫—Ä—ã–ª—Å—è
```
### –¢–µ—Å—Ç 3: AI Rename
```
1. –°–æ–∑–¥–∞—Ç—å Frame "Container" —Å –¥–µ—Ç—å–º–∏: "Rectangle 1", "Text 1", "Group 1"
2. –í—ã–±—Ä–∞—Ç—å Frame
3. Rename panel ‚Üí AI Mode
4. –ü—Ä–æ–º–ø—Ç: "Use semantic names based on parent-child relationships"
5. Include hierarchy: ‚úì checked
6. Preview
7. ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–∞–±–ª–∏—Ü–∞:
   - Container ‚Üí MainContainer
   - Rectangle 1 ‚Üí MainContainer_Background
   - Text 1 ‚Üí MainContainer_Label
   - Group 1 ‚Üí MainContainer_Elements
8. Apply
9. ‚úÖ –í Figma –≤—Å–µ –∏–º–µ–Ω–∞ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å
```
### –¢–µ—Å—Ç 4: –ü–æ—Ä—è–¥–æ–∫ –≤–∫–ª–∞–¥–æ–∫
```
1. –û—Ç–∫—Ä—ã—Ç—å –ø–ª–∞–≥–∏–Ω
2. ‚úÖ –í–∫–ª–∞–¥–∫–∏ –≤ –ø–æ—Ä—è–¥–∫–µ: Generate ‚Üí Data ‚Üí Rename ‚Üí Settings ‚Üí Help
3. ‚úÖ –í–∫–ª–∞–¥–∫–∏ Prompts –Ω–µ—Ç
4. Generate panel ‚Üí –µ—Å—Ç—å –∫–Ω–æ–ø–∫–∞ "üìö Saved Prompts"
```
### –¢–µ—Å—Ç 5: –ò—Å—Ö–æ–¥–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
```
1. Settings ‚Üí 25 –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ –¥–æ—Å—Ç—É–ø–Ω—ã ‚úÖ
2. Generate ‚Üí –æ–¥–∏–Ω TEXT —Å–ª–æ–π ‚Üí –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç ‚úÖ
3. Data ‚Üí –ø—Ä–∏–º–µ–Ω–∏—Ç—å preset ‚Üí —Ä–∞–±–æ—Ç–∞–µ—Ç ‚úÖ
4. Rename ‚Üí Style Mode ‚Üí BEM ‚Üí —Ä–∞–±–æ—Ç–∞–µ—Ç ‚úÖ
5. Language switcher ‚Üí –†—É—Å—Å–∫–∏–π ‚Üí UI –Ω–∞ —Ä—É—Å—Å–∫–æ–º ‚úÖ
6. Batch Generate ‚Üí 5 —Å–ª–æ—ë–≤ ‚Üí –≤—Å–µ –æ–±—Ä–∞–±–æ—Ç–∞–ª–∏—Å—å ‚úÖ
```
---
## –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
**–û–±—â–µ–µ –≤—Ä–µ–º—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** 4-6 —á–∞—Å–æ–≤
- Phase 1 (–ü—Ä–æ—Å—Ç—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è): 30 –º–∏–Ω—É—Ç - **‚úÖ –ß–ê–°–¢–ò–ß–ù–û –í–´–ü–û–õ–ù–ï–ù–û (3/6 –ø–æ–¥–∑–∞–¥–∞—á, ~15 –º–∏–Ω –æ—Å—Ç–∞–ª–æ—Å—å)**
- Phase 2 (Multi-field –≥–µ–Ω–µ—Ä–∞—Ü–∏—è): 2-3 —á–∞—Å–∞ - ‚è≥ –û–∂–∏–¥–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- Phase 3 (AI Rename): 1.5-2 —á–∞—Å–∞ - ‚è≥ –û–∂–∏–¥–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- Phase 4 (–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ): 30 –º–∏–Ω—É—Ç - ‚è≥ –û–∂–∏–¥–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
**–§–∞–π–ª–æ–≤ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è:** 12
**–ù–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤:** 0 (–≤—Å—ë –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö)
**–ù–æ–≤—ã—Ö message types:** 5
**–°—Ç—Ä–æ–∫ –∫–æ–¥–∞ (–ø—Ä–∏–º–µ—Ä–Ω–æ):** 800-1000 –Ω–æ–≤—ã—Ö —Å—Ç—Ä–æ–∫
---
## –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å
**‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ:**
1. –ò–∑–º–µ–Ω—ë–Ω –ø–æ—Ä—è–¥–æ–∫ –≤–∫–ª–∞–¥–æ–∫: Generate ‚Üí Data ‚Üí Rename ‚Üí Settings ‚Üí Help
2. –£–±—Ä–∞–Ω–∞ –≤–∫–ª–∞–¥–∫–∞ Prompts –∏–∑ tabs
3. –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ "üìö Saved Prompts" –≤ Generate panel
4. –ü–ª–∞–≥–∏–Ω —Å–æ–±—Ä–∞–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
**‚è≥ –û—Å—Ç–∞–ª–æ—Å—å –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è Phase 1 (~15 –º–∏–Ω—É—Ç):**
1. –ü–æ–¥–∫–ª—é—á–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ –≤ GeneratePanel.ts
2. –ü—Ä–µ–≤—Ä–∞—Ç–∏—Ç—å prompts-panel –≤ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
3. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å Edit –¥–∏–∞–ª–æ–≥ (–∑–∞–º–µ–Ω–∏—Ç—å alert –Ω–∞ window.prompt)
4. –î–æ–±–∞–≤–∏—Ç—å –∑–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª–∞ –ø–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ –ø—Ä–æ–º–ø—Ç–∞
**üîú –°–ª–µ–¥—É—é—â–∏–µ —Ñ–∞–∑—ã:**
- Phase 2: Multi-field –≥–µ–Ω–µ—Ä–∞—Ü–∏—è (–≥–ª–∞–≤–Ω–æ–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ)
- Phase 3: AI —Ä–µ–∂–∏–º –≤ Rename
- Phase 4: –§–∏–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
---
## –ì–æ—Ç–æ–≤–æ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é! üöÄ
**–¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞ –¥–ª—è –æ–¥–Ω–æ–≥–æ –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–≥–æ TEXT —É–∑–ª–∞
- –ë–∞–∑–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ (API key, URL, model, temperature, maxTokens)
- –ü–æ–¥—Å—á—ë—Ç —Ç–æ–∫–µ–Ω–æ–≤ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- –°–∏—Å—Ç–µ–º–∞ –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö (Data Presets) - –±–∞–∑–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã–º –æ–±—Ö–æ–¥–æ–º –∏ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π
**–ß—Ç–æ —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å:**
### 1. –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã —Å –¥–µ—Ç–∞–ª—è–º–∏
- **Yandex Cloud:** –í—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –º–æ–¥–µ–ª–∏ (YandexGPT 5 Lite/Pro/5.1 Pro, Alice, GPT OSS, Gemma, Qwen) —Å –æ–ø–∏—Å–∞–Ω–∏—è–º–∏ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤
- **OpenAI:** GPT-4o, GPT-4o Mini —Å —Ü–µ–Ω–∞–º–∏ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏
- **Claude (Anthropic):** 3.5 Haiku/Sonnet, Opus 4.5 - —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–æ–∫—Å–∏ –¥–ª—è CORS
- **Google Gemini:** 2.5 Flash, 1.5 Pro - –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Ç–∏—Ä –¥–æ 15 req/min
- **Mistral AI:** Mistral Large/Small —Å –µ–≤—Ä–æ–ø–µ–π—Å–∫–∏–º —Ö–æ—Å—Ç–∏–Ω–≥–æ–º
- **Groq:** –°–≤–µ—Ä—Ö–±—ã—Å—Ç—Ä—ã–π inference –¥–ª—è Llama/Mixtral
- **Cohere:** Command R/R+ –¥–ª—è –±–∏–∑–Ω–µ—Å-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π –æ–¥–Ω–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "GPT-4o Production" –∏ "GPT-4o Mini Testing")
### 2. Batch processing
- –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –≤—ã–¥–µ–ª–µ–Ω–Ω—ã—Ö TEXT —É–∑–ª–æ–≤
- –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä: "Processing 3/10 layers..."
- –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞ –∫–æ –≤—Å–µ–º —Å–ª–æ—è–º
- –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –æ–±—Ö–æ–¥ - –ø–æ–∏—Å–∫ TEXT –≤–Ω—É—Ç—Ä–∏ Frame/Group
### 3. Saved Prompts Library
- –•—Ä–∞–Ω–µ–Ω–∏–µ –≤ figma.clientStorage (—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –º–µ–∂–¥—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏)
- –°–æ–∑–¥–∞–Ω–∏–µ/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–æ–≤
- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏–ª–∏ —Ç–µ–≥–∏ –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
- –ë—ã—Å—Ç—Ä—ã–π –≤—ã–±–æ—Ä –∏–∑ dropdown
### 4. Token Pricing
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ü–µ–Ω—ã (–¥–ª—è –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã—Ö –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤)
- –î–µ—Ñ–æ–ª—Ç–Ω—ã–µ —Ü–µ–Ω—ã –∑–∞—Ö–∞—Ä–¥–∫–æ–¥–µ–Ω—ã –Ω–∞ 2026 –≥–æ–¥
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
### 5. –ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å (i18n)
- –ê–Ω–≥–ª–∏–π—Å–∫–∏–π (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- –†—É—Å—Å–∫–∏–π
- –Ø–ø–æ–Ω—Å–∫–∏–π
- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —è–∑—ã–∫–∞ –≤ Settings
- –•—Ä–∞–Ω–µ–Ω–∏–µ –≤—ã–±–æ—Ä–∞ –≤ clientStorage
### 6. –ú–∞—Å—Å–æ–≤–æ–µ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Å–ª–æ—ë–≤ (Layer Renaming)
- –ù–æ–≤–∞—è –≤–∫–ª–∞–¥–∫–∞ "Rename" –¥–ª—è –ø–∞–∫–µ—Ç–Ω–æ–≥–æ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è
- **–ü—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–µ—Å–µ—Ç—ã:**
  - BEM (Block Element Modifier)
  - Camel Case
  - Snake Case
  - Kebab Case
  - Custom Rules (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø—Ä–∞–≤–∏–ª–∞)
- **–£–º–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞:**
  - –ù–ï —Ç—Ä–æ–≥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (Component, ComponentSet) –∏ —Å–ª–æ–∏ –≤–Ω—É—Ç—Ä–∏ –Ω–∏—Ö
  - –ù–ï —Ç—Ä–æ–≥–∞—Ç—å –≤–µ–∫—Ç–æ—Ä–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã (Vector, Group —Å –≤–µ–∫—Ç–æ—Ä–∞–º–∏ –≤–Ω—É—Ç—Ä–∏)
  - –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å: Frame, Group (–±–µ–∑ –≤–µ–∫—Ç–æ—Ä–æ–≤), Text
- **–†–µ–∫—É—Ä—Å–∏–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞:**
  - –ü—Ä–æ—Ö–æ–¥ –ø–æ –≤—Å–µ–º —Å–ª–æ—è–º –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —Ñ—Ä–µ–π–º–æ–≤
  - –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª –∫ –∫–∞–∂–¥–æ–º—É –ø–æ–¥—Ö–æ–¥—è—â–µ–º—É —Å–ª–æ—é
- **Preview –ø–µ—Ä–µ–¥ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º:**
  - –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ –∏–∑–º–µ–Ω–µ–Ω–∏–π: "Old Name" ‚Üí "New Name"
  - –ö–Ω–æ–ø–∫–∞ "Apply" –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
## –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–π –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã
### –°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã (–∏–∑ Agent 1):
- ‚úÖ Type-safe messaging –º–µ–∂–¥—É UI –∏ Sandbox
- ‚úÖ –ß–∏—Å—Ç–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ `src/ui/` –∏ `src/sandbox/`
- ‚úÖ Retry –ª–æ–≥–∏–∫–∞ —Å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–º backoff
- ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ (StorageManager)
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
### –°–ª–∞–±—ã–µ –º–µ—Å—Ç–∞ (–∫–æ—Ç–æ—Ä—ã–µ –ù–£–ñ–ù–û –∏—Å–ø—Ä–∞–≤–∏—Ç—å):
- ‚ùå UI –º–æ–Ω–æ–ª–∏—Ç: 1358 —Å—Ç—Ä–æ–∫ –≤ `main.ts`
- ‚ùå –ù–µ—Ç –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ (–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏)
- ‚ùå Streaming –æ—Ç–∫–ª—é—á–µ–Ω (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ Figma fetch API) - –æ—Å—Ç–∞–≤–ª—è–µ–º –∫–∞–∫ –µ—Å—Ç—å
- ‚ùå –ù–µ—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
- ‚ùå –ù–µ—Ç —Ç–µ—Å—Ç–æ–≤
### –†–µ—à–µ–Ω–∏—è –¥–ª—è —Å–ª–∞–±—ã—Ö –º–µ—Å—Ç
**1. –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ UI –º–æ–Ω–æ–ª–∏—Ç–∞ ‚Üí –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**
–†–∞–∑–±–∏—Ç—å `src/ui/main.ts` –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏:
```
src/ui/
‚îú‚îÄ‚îÄ main.ts                    # –ì–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä (200-300 —Å—Ç—Ä–æ–∫)
‚îú‚îÄ‚îÄ modules/
‚îÇ   ‚îú‚îÄ‚îÄ GeneratePanel.ts       # –õ–æ–≥–∏–∫–∞ –≤–∫–ª–∞–¥–∫–∏ Generate
‚îÇ   ‚îú‚îÄ‚îÄ SettingsPanel.ts       # –õ–æ–≥–∏–∫–∞ –≤–∫–ª–∞–¥–∫–∏ Settings
‚îÇ   ‚îú‚îÄ‚îÄ DataPanel.ts           # –õ–æ–≥–∏–∫–∞ –≤–∫–ª–∞–¥–∫–∏ Data
‚îÇ   ‚îú‚îÄ‚îÄ RenamePanel.ts         # –õ–æ–≥–∏–∫–∞ –≤–∫–ª–∞–¥–∫–∏ Rename
‚îÇ   ‚îú‚îÄ‚îÄ ProviderConfigModal.ts # –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ PromptLibraryModal.ts  # –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –ø—Ä–æ–º–ø—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ RenamePreviewModal.ts  # –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –ø—Ä–µ–≤—å—é rename
‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îú‚îÄ‚îÄ dom.ts                 # –•–µ–ª–ø–µ—Ä—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å DOM
‚îÇ   ‚îú‚îÄ‚îÄ validation.ts          # –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–æ—Ä–º
‚îÇ   ‚îî‚îÄ‚îÄ formatting.ts          # –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (—á–∏—Å–ª–∞, –¥–∞—Ç—ã)
‚îî‚îÄ‚îÄ index.html
```
**–ü—Ä–∏–º–µ—Ä –º–æ–¥—É–ª—è** (`src/ui/modules/GeneratePanel.ts`):
```typescript
import { sendToSandbox } from '../messaging';
import { validatePrompt, validateProviderConfig } from '../utils/validation';
export class GeneratePanel {
  private promptElement: HTMLTextAreaElement;
  private generateBtn: HTMLButtonElement;
  private batchBtn: HTMLButtonElement;
  constructor() {
    this.promptElement = document.getElementById('prompt') as HTMLTextAreaElement;
    this.generateBtn = document.getElementById('generate-btn') as HTMLButtonElement;
    this.batchBtn = document.getElementById('batch-generate-btn') as HTMLButtonElement;
    this.initEventListeners();
  }
  private initEventListeners() {
    this.generateBtn.addEventListener('click', () => this.handleGenerate());
    this.batchBtn.addEventListener('click', () => this.handleBatchGenerate());
  }
  private async handleGenerate() {
    const prompt = this.promptElement.value.trim();
    // –í–∞–ª–∏–¥–∞—Ü–∏—è
    const validation = validatePrompt(prompt);
    if (!validation.valid) {
      this.showError(validation.error);
      return;
    }
    // –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞
    sendToSandbox({
      type: 'generate',
      id: generateUniqueId(),
      prompt,
      providerConfigId: this.getActiveProviderId()
    });
  }
  // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã
}
```
**–ì–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä** (`src/ui/main.ts`):
```typescript
import { GeneratePanel } from './modules/GeneratePanel';
import { SettingsPanel } from './modules/SettingsPanel';
import { DataPanel } from './modules/DataPanel';
import { RenamePanel } from './modules/RenamePanel';
class PluginUI {
  private generatePanel: GeneratePanel;
  private settingsPanel: SettingsPanel;
  private dataPanel: DataPanel;
  private renamePanel: RenamePanel;
  async init() {
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥—É–ª–µ–π
    this.generatePanel = new GeneratePanel();
    this.settingsPanel = new SettingsPanel();
    this.dataPanel = new DataPanel();
    this.renamePanel = new RenamePanel();
    // –ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫
    await this.loadSettings();
    // –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ i18n
    this.applyTranslations();
    // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ç–∞–±–æ–≤
    this.initTabs();
  }
  private initTabs() {
    const tabs = document.querySelectorAll('.tab');
    tabs.forEach(tab => {
      tab.addEventListener('click', () => {
        const tabName = tab.getAttribute('data-tab');
        this.switchTab(tabName);
      });
    });
  }
  // ... –æ—Å—Ç–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ (–∫–æ—Ä–æ—Ç–∫–∞—è)
}
// –ó–∞–ø—É—Å–∫
const ui = new PluginUI();
ui.init();
```
**2. –ê–±—Å—Ç—Ä–∞–∫—Ü–∏—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ ‚Üí –ü–∞—Ç—Ç–µ—Ä–Ω Strategy**
–§–∞–π–ª: `src/sandbox/providers/BaseProvider.ts` (–ù–û–í–´–ô):
```typescript
export interface ProviderResponse {
  text: string;
  tokens: {
    input: number;
    output: number;
  };
  cost: number;
}
export abstract class BaseProvider {
  constructor(
    protected config: UserProviderConfig,
    protected baseConfig: ProviderConfig
  ) {}
  abstract async generateText(prompt: string, settings: GenerationSettings): Promise<ProviderResponse>;
  protected calculateCost(inputTokens: number, outputTokens: number): number {
    const pricing = this.config.customPricing || this.baseConfig.pricing;
    return (inputTokens * pricing.input + outputTokens * pricing.output) / 1_000_000;
  }
  protected getHeaders(): Record<string, string> {
    return {
      'Content-Type': 'application/json',
      'Authorization': this.formatApiKey()
    };
  }
  protected abstract formatApiKey(): string;
  protected abstract buildRequestBody(prompt: string, settings: GenerationSettings): any;
  protected abstract parseResponse(response: any): ProviderResponse;
}
```
**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞:**
```typescript
// src/sandbox/providers/OpenAIProvider.ts
export class OpenAIProvider extends BaseProvider {
  protected formatApiKey(): string {
    return `Bearer ${this.config.apiKey}`;
  }
  protected buildRequestBody(prompt: string, settings: GenerationSettings) {
    return {
      model: this.baseConfig.model,
      messages: [{ role: 'user', content: prompt }],
      temperature: settings.temperature,
      max_tokens: settings.maxTokens
    };
  }
  protected parseResponse(data: any): ProviderResponse {
    const message = data.choices[0].message.content;
    const usage = data.usage;
    return {
      text: message,
      tokens: {
        input: usage.prompt_tokens,
        output: usage.completion_tokens
      },
      cost: this.calculateCost(usage.prompt_tokens, usage.completion_tokens)
    };
  }
  async generateText(prompt: string, settings: GenerationSettings): Promise<ProviderResponse> {
    const response = await fetch(`${this.baseConfig.apiUrl}/chat/completions`, {
      method: 'POST',
      headers: this.getHeaders(),
      body: JSON.stringify(this.buildRequestBody(prompt, settings))
    });
    if (!response.ok) {
      throw new Error(`OpenAI API error: ${response.statusText}`);
    }
    const data = await response.json();
    return this.parseResponse(data);
  }
}
// src/sandbox/providers/YandexProvider.ts
export class YandexProvider extends BaseProvider {
  // –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ OpenAI, –Ω–æ —Å –¥—Ä—É–≥–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π
}
// src/sandbox/providers/ClaudeProvider.ts
export class ClaudeProvider extends BaseProvider {
  // –î—Ä—É–≥–æ–π —Ñ–æ—Ä–º–∞—Ç –∑–∞–ø—Ä–æ—Å–∞ –∏ –æ—Ç–≤–µ—Ç–∞
}
```
**Provider Factory** (`src/sandbox/providers/ProviderFactory.ts`):
```typescript
export class ProviderFactory {
  static createProvider(
    config: UserProviderConfig,
    baseConfig: ProviderConfig
  ): BaseProvider {
    switch (baseConfig.provider) {
      case 'openai':
        return new OpenAIProvider(config, baseConfig);
      case 'yandex':
        return new YandexProvider(config, baseConfig);
      case 'claude':
        return new ClaudeProvider(config, baseConfig);
      case 'gemini':
        return new GeminiProvider(config, baseConfig);
      // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã
      default:
        throw new Error(`Unknown provider: ${baseConfig.provider}`);
    }
  }
}
```
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ** (`src/sandbox/code.ts`):
```typescript
private async handleGenerate(message: GenerateRequest): Promise<void> {
  const settings = await this.storageManager.loadSettings();
  const config = settings.providerConfigs.find(c => c.id === message.providerConfigId);
  const baseConfig = PROVIDER_CONFIGS.find(p => p.id === config.baseConfigId);
  // –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ —á–µ—Ä–µ–∑ —Ñ–∞–±—Ä–∏–∫—É
  const provider = ProviderFactory.createProvider(config, baseConfig);
  // –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –í–°–ï–• –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
  const result = await provider.generateText(message.prompt, settings.generation);
  // ... –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
}
```
**3. –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö**
–§–∞–π–ª: `src/shared/validation.ts` (–ù–û–í–´–ô):
```typescript
export interface ValidationResult {
  valid: boolean;
  error?: string;
}
// –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–æ–º–ø—Ç–∞
export function validatePrompt(prompt: string): ValidationResult {
  if (!prompt || prompt.trim().length === 0) {
    return { valid: false, error: 'Prompt cannot be empty' };
  }
  if (prompt.length > 10000) {
    return { valid: false, error: 'Prompt is too long (max 10000 characters)' };
  }
  return { valid: true };
}
// –í–∞–ª–∏–¥–∞—Ü–∏—è API –∫–ª—é—á–∞
export function validateApiKey(apiKey: string, provider: string): ValidationResult {
  if (!apiKey || apiKey.trim().length === 0) {
    return { valid: false, error: 'API key is required' };
  }
  // –°–ø–µ—Ü–∏—Ñ–∏—á–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
  switch (provider) {
    case 'openai':
      if (!apiKey.startsWith('sk-')) {
        return { valid: false, error: 'OpenAI API key must start with "sk-"' };
      }
      break;
    case 'yandex':
      if (!apiKey.startsWith('AQVN')) {
        return { valid: false, error: 'Yandex API key must start with "AQVN"' };
      }
      break;
    // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã
  }
  return { valid: true };
}
// –í–∞–ª–∏–¥–∞—Ü–∏—è URL
export function validateUrl(url: string): ValidationResult {
  if (!url || url.trim().length === 0) {
    return { valid: false, error: 'URL is required' };
  }
  try {
    new URL(url);
    return { valid: true };
  } catch {
    return { valid: false, error: 'Invalid URL format' };
  }
}
// –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
export function validateGenerationSettings(settings: GenerationSettings): ValidationResult {
  if (settings.temperature < MIN_TEMPERATURE || settings.temperature > MAX_TEMPERATURE) {
    return {
      valid: false,
      error: `Temperature must be between ${MIN_TEMPERATURE} and ${MAX_TEMPERATURE}`
    };
  }
  if (settings.maxTokens < MIN_MAX_TOKENS || settings.maxTokens > MAX_MAX_TOKENS) {
    return {
      valid: false,
      error: `Max tokens must be between ${MIN_MAX_TOKENS} and ${MAX_MAX_TOKENS}`
    };
  }
  return { valid: true };
}
```
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏:**
```typescript
// –í UI
const validation = validatePrompt(prompt);
if (!validation.valid) {
  showNotification(validation.error, 'error');
  return;
}
// –í Sandbox
const validation = validateApiKey(config.apiKey, baseConfig.provider);
if (!validation.valid) {
  throw new Error(validation.error);
}
```
**4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤:
```
tests/
‚îú‚îÄ‚îÄ unit/
‚îÇ   ‚îú‚îÄ‚îÄ validation.test.ts        # –¢–µ—Å—Ç—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ providers.test.ts         # –¢–µ—Å—Ç—ã –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ rename-helpers.test.ts    # –¢–µ—Å—Ç—ã –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ figma-helpers.test.ts     # –¢–µ—Å—Ç—ã Figma helpers
‚îú‚îÄ‚îÄ integration/
‚îÇ   ‚îú‚îÄ‚îÄ api-client.test.ts        # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã API
‚îÇ   ‚îî‚îÄ‚îÄ storage.test.ts           # –¢–µ—Å—Ç—ã storage
‚îî‚îÄ‚îÄ setup.ts                      # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–π —Å—Ä–µ–¥—ã
```
**package.json** (–¥–æ–±–∞–≤–∏—Ç—å):
```json
{
  "devDependencies": {
    "@figma/plugin-typings": "^1.79.0",
    "@types/jest": "^29.5.0",
    "jest": "^29.5.0",
    "ts-jest": "^29.1.0"
  },
  "scripts": {
    "test": "jest",
    "test:watch": "jest --watch",
    "test:coverage": "jest --coverage"
  }
}
```
**–ü—Ä–∏–º–µ—Ä —Ç–µ—Å—Ç–∞** (`tests/unit/validation.test.ts`):
```typescript
import { validatePrompt, validateApiKey, validateUrl } from '../../src/shared/validation';
describe('Validation', () => {
  describe('validatePrompt', () => {
    it('should pass for valid prompt', () => {
      const result = validatePrompt('Write a catchy headline');
      expect(result.valid).toBe(true);
    });
    it('should fail for empty prompt', () => {
      const result = validatePrompt('');
      expect(result.valid).toBe(false);
      expect(result.error).toContain('empty');
    });
    it('should fail for too long prompt', () => {
      const result = validatePrompt('a'.repeat(10001));
      expect(result.valid).toBe(false);
      expect(result.error).toContain('too long');
    });
  });
  describe('validateApiKey', () => {
    it('should validate OpenAI key format', () => {
      const result = validateApiKey('sk-abc123', 'openai');
      expect(result.valid).toBe(true);
    });
    it('should fail for invalid OpenAI key', () => {
      const result = validateApiKey('abc123', 'openai');
      expect(result.valid).toBe(false);
      expect(result.error).toContain('sk-');
    });
    it('should validate Yandex key format', () => {
      const result = validateApiKey('AQVN123', 'yandex');
      expect(result.valid).toBe(true);
    });
  });
  describe('validateUrl', () => {
    it('should pass for valid URL', () => {
      const result = validateUrl('https://api.openai.com/v1');
      expect(result.valid).toBe(true);
    });
    it('should fail for invalid URL', () => {
      const result = validateUrl('not-a-url');
      expect(result.valid).toBe(false);
    });
  });
});
```
**–ü—Ä–∏–º–µ—Ä —Ç–µ—Å—Ç–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞** (`tests/unit/providers.test.ts`):
```typescript
import { OpenAIProvider } from '../../src/sandbox/providers/OpenAIProvider';
import { PROVIDER_CONFIGS } from '../../src/shared/providers';
describe('OpenAIProvider', () => {
  const mockConfig = {
    id: 'test-config',
    baseConfigId: 'openai-gpt4o',
    name: 'Test Config',
    apiKey: 'sk-test123',
    enabled: true,
    createdAt: Date.now()
  };
  const baseConfig = PROVIDER_CONFIGS.find(p => p.id === 'openai-gpt4o')!;
  const provider = new OpenAIProvider(mockConfig, baseConfig);
  it('should format API key correctly', () => {
    const headers = provider['getHeaders']();
    expect(headers['Authorization']).toBe('Bearer sk-test123');
  });
  it('should build request body with correct structure', () => {
    const body = provider['buildRequestBody']('Test prompt', {
      temperature: 0.7,
      maxTokens: 500
    });
    expect(body).toHaveProperty('model');
    expect(body).toHaveProperty('messages');
    expect(body.temperature).toBe(0.7);
    expect(body.max_tokens).toBe(500);
  });
  it('should calculate cost correctly', () => {
    const cost = provider['calculateCost'](1000, 500);
    // GPT-4o: $5 per 1M input, $20 per 1M output
    // (1000 * 5 + 500 * 20) / 1_000_000 = 0.015
    expect(cost).toBeCloseTo(0.015, 4);
  });
});
```
### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã:
1. **`src/shared/types.ts`** - –≤—Å–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
2. **`src/shared/constants.ts`** - –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã, –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
3. **`src/sandbox/api-client.ts`** - –ª–æ–≥–∏–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ API
4. **`src/sandbox/code.ts`** - –≥–ª–∞–≤–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ sandbox
5. **`src/ui/main.ts`** - –≥–ª–∞–≤–Ω—ã–π UI –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä
6. **`src/ui/index.html`** - HTML —Ä–∞–∑–º–µ—Ç–∫–∞
7. **`manifest.json`** - allowedDomains –¥–ª—è CORS
## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ
### –ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
**–§–∞–π–ª: `src/shared/providers.ts`** (–ù–û–í–´–ô)
```typescript
export interface ProviderConfig {
  id: string;                    // 'openai-gpt4o', 'claude-sonnet-35'
  name: string;                  // 'GPT-4o'
  provider: string;              // 'openai', 'claude', 'yandex'
  description: string;           // –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤
  model: string;                 // 'gpt-4o'
  apiUrl: string;                // URL API endpoint
  requiresProxy: boolean;        // true –¥–ª—è Claude (CORS)
  pricing: {
    input: number;               // $ –∑–∞ 1M —Ç–æ–∫–µ–Ω–æ–≤
    output: number;
  };
  limits?: {
    maxTokens: number;
    rateLimit: string;           // "60 req/min"
  };
  tags?: string[];               // ['fast', 'cheap', 'smart']
}
// –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –ø—Ä–µ–¥–Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
export const PROVIDER_CONFIGS: ProviderConfig[] = [
  // YANDEX CLOUD
  {
    id: 'yandex-gpt5-lite',
    name: 'YandexGPT 5 Lite',
    provider: 'yandex',
    description: '–°–∞–º–∞—è –±—ã—Å—Ç—Ä–∞—è –º–æ–¥–µ–ª—å. –û—Ç–ª–∏—á–Ω–æ –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –∑–∞–¥–∞—á –∏ —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤.',
    model: 'gpt://b1g.../yandexgpt-lite/latest',
    apiUrl: 'https://proxy.uixray.tech/api/yandex',
    requiresProxy: false,  // —É–∂–µ —á–µ—Ä–µ–∑ –Ω–∞—à –ø—Ä–æ–∫—Å–∏
    pricing: { input: 0.0002, output: 0.0002 },
    limits: { maxTokens: 8000, rateLimit: '20 req/sec' },
    tags: ['fast', 'cheap', 'russian']
  },
  {
    id: 'yandex-gpt5-pro',
    name: 'YandexGPT 5 Pro',
    provider: 'yandex',
    description: '–ë–∞–ª–∞–Ω—Å —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏ –∫–∞—á–µ—Å—Ç–≤–∞. –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –∑–∞–¥–∞—á.',
    model: 'gpt://b1g.../yandexgpt/latest',
    apiUrl: 'https://proxy.uixray.tech/api/yandex',
    requiresProxy: false,
    pricing: { input: 0.0004, output: 0.0004 },
    tags: ['balanced', 'russian']
  },
  // ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ Yandex –º–æ–¥–µ–ª–∏
  // OPENAI
  {
    id: 'openai-gpt4o',
    name: 'GPT-4o',
    provider: 'openai',
    description: '–°–∞–º–∞—è —É–º–Ω–∞—è –º–æ–¥–µ–ª—å OpenAI. –õ—É—á—à–µ –≤—Å–µ–≥–æ –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–¥–∞—á.',
    model: 'gpt-4o',
    apiUrl: 'https://api.openai.com/v1',
    requiresProxy: false,
    pricing: { input: 5, output: 20 },
    limits: { maxTokens: 4096, rateLimit: '500 req/min' },
    tags: ['smart', 'expensive']
  },
  {
    id: 'openai-gpt4o-mini',
    name: 'GPT-4o Mini',
    provider: 'openai',
    description: '–î–µ—à—ë–≤–∞—è –∏ –±—ã—Å—Ç—Ä–∞—è. –û—Ç–ª–∏—á–Ω–æ –¥–ª—è –º–∞—Å—Å–æ–≤–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏.',
    model: 'gpt-4o-mini',
    apiUrl: 'https://api.openai.com/v1',
    requiresProxy: false,
    pricing: { input: 0.15, output: 0.6 },
    tags: ['cheap', 'fast']
  },
  // CLAUDE
  {
    id: 'claude-35-haiku',
    name: 'Claude 3.5 Haiku',
    provider: 'claude',
    description: '–°–∞–º—ã–π –±—ã—Å—Ç—Ä—ã–π Claude. –û—Ç–ª–∏—á–Ω–æ –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –∑–∞–¥–∞—á.',
    model: 'claude-3-5-haiku-20241022',
    apiUrl: 'https://api.anthropic.com/v1',
    requiresProxy: true,  // CORS!
    pricing: { input: 1, output: 5 },
    tags: ['fast', 'cheap']
  },
  {
    id: 'claude-35-sonnet',
    name: 'Claude 3.5 Sonnet',
    provider: 'claude',
    description: '–ë–∞–ª–∞–Ω—Å –∫–∞—á–µ—Å—Ç–≤–∞ –∏ —Å–∫–æ—Ä–æ—Å—Ç–∏. –õ—É—á—à–∏–π –¥–ª—è –∫—Ä–µ–∞—Ç–∏–≤–∞.',
    model: 'claude-3-5-sonnet-20241022',
    apiUrl: 'https://api.anthropic.com/v1',
    requiresProxy: true,
    pricing: { input: 3, output: 15 },
    tags: ['balanced', 'creative']
  },
  // GEMINI
  {
    id: 'gemini-25-flash',
    name: 'Gemini 2.5 Flash',
    provider: 'gemini',
    description: '–ë–ï–°–ü–õ–ê–¢–ù–û –¥–æ 15 req/min. –û—Ç–ª–∏—á–Ω–æ –¥–ª—è —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤!',
    model: 'gemini-2.5-flash',
    apiUrl: 'https://generativelanguage.googleapis.com/v1beta',
    requiresProxy: false,
    pricing: { input: 0.075, output: 0.3 },
    limits: { rateLimit: '15 req/min (free tier)' },
    tags: ['free', 'fast', 'experimental']
  },
  // MISTRAL, GROQ, COHERE...
  // (–æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –ø–æ —Ç–æ–º—É –∂–µ —à–∞–±–ª–æ–Ω—É)
];
// –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º –¥–ª—è UI
export function getProvidersByCategory(): Record<string, ProviderConfig[]> {
  return {
    'Yandex Cloud': PROVIDER_CONFIGS.filter(p => p.provider === 'yandex'),
    'OpenAI': PROVIDER_CONFIGS.filter(p => p.provider === 'openai'),
    'Anthropic Claude': PROVIDER_CONFIGS.filter(p => p.provider === 'claude'),
    'Google Gemini': PROVIDER_CONFIGS.filter(p => p.provider === 'gemini'),
    'Mistral AI': PROVIDER_CONFIGS.filter(p => p.provider === 'mistral'),
    'Groq': PROVIDER_CONFIGS.filter(p => p.provider === 'groq'),
    'Cohere': PROVIDER_CONFIGS.filter(p => p.provider === 'cohere'),
  };
}
```
### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
**–û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ —Ç–∏–ø—ã** (`src/shared/types.ts`):
```typescript
// –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–Ω–∞—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
export interface UserProviderConfig {
  id: string;                      // user-generated UUID
  baseConfigId: string;            // —Å—Å—ã–ª–∫–∞ –Ω–∞ PROVIDER_CONFIGS[].id
  name: string;                    // "My GPT-4o Production"
  apiKey: string;                  // API –∫–ª—é—á
  customPricing?: {                // –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ —Ü–µ–Ω—ã
    input: number;
    output: number;
  };
  customUrl?: string;              // –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–π URL (–¥–ª—è OpenAI-compatible)
  enabled: boolean;                // –ê–∫—Ç–∏–≤–Ω–∞ –ª–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
  createdAt: number;
  lastUsed?: number;
}
// –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
export interface Settings {
  version: number;                 // 2 (–Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è —Å –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏)
  // –ù–û–í–û–ï: –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
  providerConfigs: UserProviderConfig[];
  // –ù–û–í–û–ï: ID –∞–∫—Ç–∏–≤–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
  activeProviderId: string;
  // –£–°–¢–ê–†–ï–õ–û (–æ—Å—Ç–∞–≤–ª—è–µ–º –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏):
  provider: ProviderType;
  lmStudio: LMStudioConfig;
  yandex: YandexConfig;
  openaiCompatible: OpenAICompatibleConfig;
  // –û—Å—Ç–∞–ª—å–Ω–æ–µ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
  generation: GenerationSettings;
  ui: UISettings;
  language: 'en' | 'ru' | 'ja';    // –ù–û–í–û–ï
}
// –°–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–π –ø—Ä–æ–º–ø—Ç
export interface SavedPrompt {
  id: string;
  name: string;
  content: string;
  category?: string;               // 'marketing', 'technical', 'creative'
  tags?: string[];
  usageCount: number;
  createdAt: number;
  updatedAt: number;
}
export interface SavedPromptsLibrary {
  prompts: SavedPrompt[];
  categories: string[];            // –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π
  lastUpdated: number;
}
```
### –ú–∏–≥—Ä–∞—Ü–∏—è —Å—Ç–∞—Ä—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
**–§–∞–π–ª: `src/sandbox/storage-manager.ts`** (–æ–±–Ω–æ–≤–∏—Ç—å):
```typescript
async loadSettings(): Promise<Settings> {
  // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ ...
  // –ú–∏–≥—Ä–∞—Ü–∏—è –≤–µ—Ä—Å–∏–∏ 1 ‚Üí 2
  if (!settings.version || settings.version < 2) {
    settings = this.migrateToV2(settings);
  }
  return settings;
}
private migrateToV2(oldSettings: any): Settings {
  const providerConfigs: UserProviderConfig[] = [];
  // –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º —Å—Ç–∞—Ä—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ –Ω–æ–≤—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
  // LM Studio
  if (oldSettings.lmStudio?.enabled) {
    providerConfigs.push({
      id: 'migrated-lmstudio',
      baseConfigId: 'lmstudio-custom',
      name: 'LM Studio (migrated)',
      apiKey: '',
      customUrl: oldSettings.lmStudio.url,
      enabled: true,
      createdAt: Date.now()
    });
  }
  // Yandex
  if (oldSettings.yandex?.enabled && oldSettings.yandex?.apiKey) {
    providerConfigs.push({
      id: 'migrated-yandex',
      baseConfigId: 'yandex-gpt5-lite',  // –¥–µ—Ñ–æ–ª—Ç
      name: 'Yandex Cloud (migrated)',
      apiKey: oldSettings.yandex.apiKey,
      enabled: true,
      createdAt: Date.now()
    });
  }
  // OpenAI Compatible
  if (oldSettings.openaiCompatible?.enabled && oldSettings.openaiCompatible?.apiKey) {
    providerConfigs.push({
      id: 'migrated-openai',
      baseConfigId: 'openai-gpt4o-mini',  // –¥–µ—Ñ–æ–ª—Ç
      name: 'OpenAI (migrated)',
      apiKey: oldSettings.openaiCompatible.apiKey,
      customUrl: oldSettings.openaiCompatible.url,
      enabled: true,
      createdAt: Date.now()
    });
  }
  return {
    ...oldSettings,
    version: 2,
    providerConfigs,
    activeProviderId: providerConfigs[0]?.id || '',
    language: 'en',  // –¥–µ—Ñ–æ–ª—Ç
  };
}
```
## Batch Processing (–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞)
**–û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è** (`src/shared/messages.ts`):
```typescript
// UI ‚Üí Sandbox
interface GenerateBatchRequest {
  type: 'generate-batch';
  id: string;
  prompt: string;
  providerConfigId: string;        // ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
}
// Sandbox ‚Üí UI (–ø—Ä–æ–≥—Ä–µ—Å—Å)
interface BatchProgressResponse {
  type: 'batch-progress';
  id: string;
  current: number;                 // 3
  total: number;                   // 10
  currentNodeName: string;         // "Header Text"
}
// Sandbox ‚Üí UI (–∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ)
interface GenerateBatchResponse {
  type: 'generate-batch-complete';
  id: string;
  success: boolean;
  processed: number;
  failed: number;
  totalTokens: number;
  totalCost: number;
}
```
**–õ–æ–≥–∏–∫–∞** (`src/sandbox/code.ts`):
```typescript
private async handleGenerateBatch(message: GenerateBatchRequest): Promise<void> {
  try {
    // –ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
    const settings = await this.storageManager.loadSettings();
    const config = settings.providerConfigs.find(c => c.id === message.providerConfigId);
    if (!config) {
      throw new Error('Provider config not found');
    }
    // –ü–æ–ª—É—á–∏—Ç—å –±–∞–∑–æ–≤—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
    const baseConfig = PROVIDER_CONFIGS.find(p => p.id === config.baseConfigId);
    // –ù–∞–π—Ç–∏ –≤—Å–µ TEXT —É–∑–ª—ã (—Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ!)
    const textNodes = await getSelectedTextNodes();
    if (textNodes.length === 0) {
      throw new Error('No text layers selected');
    }
    let processed = 0;
    let failed = 0;
    let totalTokens = 0;
    let totalCost = 0;
    // –ü–û–°–õ–ï–î–û–í–ê–¢–ï–õ–¨–ù–ê–Ø –æ–±—Ä–∞–±–æ—Ç–∫–∞
    for (let i = 0; i < textNodes.length; i++) {
      const nodeInfo = textNodes[i];
      // –û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å
      sendToUI({
        type: 'batch-progress',
        id: message.id,
        current: i + 1,
        total: textNodes.length,
        currentNodeName: nodeInfo.name
      });
      try {
        // –ü–æ–ª—É—á–∏—Ç—å —É–∑–µ–ª
        const node = await figma.getNodeByIdAsync(nodeInfo.id);
        if (!node || node.type !== 'TEXT') {
          failed++;
          continue;
        }
        await loadFontForNode(node);
        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞
        const result = await this.apiClient.generateText({
          prompt: message.prompt,
          config: config,
          baseConfig: baseConfig
        });
        // –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
        node.characters = result.text;
        processed++;
        totalTokens += result.tokens;
        totalCost += result.cost;
      } catch (error) {
        console.error(`Failed to process node ${nodeInfo.id}:`, error);
        failed++;
      }
    }
    // –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ñ–∏–Ω–∞–ª—å–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
    sendToUI({
      type: 'generate-batch-complete',
      id: message.id,
      success: true,
      processed,
      failed,
      totalTokens,
      totalCost
    });
    sendToUI({
      type: 'notification',
      level: 'success',
      message: `Processed ${processed}/${textNodes.length} layers`
    });
  } catch (error) {
    sendToUI({
      type: 'generate-batch-complete',
      id: message.id,
      success: false,
      processed: 0,
      failed: 0,
      totalTokens: 0,
      totalCost: 0
    });
    sendToUI({
      type: 'notification',
      level: 'error',
      message: error.message
    });
  }
}
```
## Saved Prompts Library
**Storage** (`src/sandbox/storage-manager.ts`):
```typescript
private savedPromptsCache: SavedPromptsLibrary | null = null;
async loadSavedPrompts(): Promise<SavedPromptsLibrary> {
  if (this.savedPromptsCache) {
    return this.savedPromptsCache;
  }
  const data = await figma.clientStorage.getAsync(STORAGE_KEY_SAVED_PROMPTS);
  const library: SavedPromptsLibrary = data || {
    prompts: [],
    categories: ['Marketing', 'Technical', 'Creative', 'General'],
    lastUpdated: Date.now()
  };
  this.savedPromptsCache = library;
  return library;
}
async saveSavedPrompts(library: SavedPromptsLibrary): Promise<void> {
  library.lastUpdated = Date.now();
  await figma.clientStorage.setAsync(STORAGE_KEY_SAVED_PROMPTS, library);
  this.savedPromptsCache = library;
}
```
**UI** (`src/ui/index.html`):
```html
<!-- –í Generate Panel -->
<div class="section">
  <label>Prompt:</label>
  <div class="prompt-header">
    <button id="load-prompt-btn" class="btn-secondary">
      üìö Load Saved
    </button>
    <button id="save-prompt-btn" class="btn-secondary">
      üíæ Save
    </button>
  </div>
  <textarea id="prompt" placeholder="Enter your prompt..."></textarea>
</div>
<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ: Load Saved Prompt -->
<div id="load-prompt-modal" class="modal" style="display: none;">
  <div class="modal-content">
    <h3>Load Saved Prompt</h3>
    <label>Category:</label>
    <select id="prompt-category-filter">
      <option value="">All Categories</option>
      <!-- –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è -->
    </select>
    <div id="saved-prompts-list">
      <!-- –°–ø–∏—Å–æ–∫ –ø—Ä–æ–º–ø—Ç–æ–≤ -->
    </div>
    <button class="btn-secondary">Close</button>
  </div>
</div>
<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ: Save Prompt -->
<div id="save-prompt-modal" class="modal" style="display: none;">
  <div class="modal-content">
    <h3>Save Prompt</h3>
    <label>Name:</label>
    <input type="text" id="prompt-name" placeholder="My Awesome Prompt">
    <label>Category:</label>
    <select id="prompt-category">
      <!-- –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è -->
    </select>
    <label>Tags (comma-separated):</label>
    <input type="text" id="prompt-tags" placeholder="short, creative">
    <div class="button-group">
      <button id="save-prompt-confirm-btn" class="btn-primary">Save</button>
      <button class="btn-secondary">Cancel</button>
    </div>
  </div>
</div>
```
## –ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å (i18n)
**–°—Ç—Ä—É–∫—Ç—É—Ä–∞** (–Ω–æ–≤—ã–π —Ñ–∞–π–ª `src/shared/i18n.ts`):
```typescript
export type Language = 'en' | 'ru' | 'ja';
export interface TranslationStrings {
  // Generate Panel
  'generate.prompt.label': string;
  'generate.prompt.placeholder': string;
  'generate.button': string;
  'generate.batch.button': string;
  'generate.progress': string;  // "Processing {current}/{total} layers..."
  // Settings
  'settings.title': string;
  'settings.language.label': string;
  'settings.provider.label': string;
  'settings.apikey.label': string;
  // Notifications
  'notification.success.generated': string;
  'notification.error.noSelection': string;
  'notification.error.emptyPrompt': string;
  // Provider descriptions (–∏–∑ PROVIDER_CONFIGS)
  // ...–æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏...
}
// –ü–µ—Ä–µ–≤–æ–¥—ã
export const translations: Record<Language, TranslationStrings> = {
  en: {
    'generate.prompt.label': 'Prompt:',
    'generate.prompt.placeholder': 'Enter your prompt...',
    'generate.button': 'Generate',
    'generate.batch.button': 'Batch Generate',
    'generate.progress': 'Processing {current}/{total} layers...',
    // ...
  },
  ru: {
    'generate.prompt.label': '–ü—Ä–æ–º–ø—Ç:',
    'generate.prompt.placeholder': '–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –ø—Ä–æ–º–ø—Ç...',
    'generate.button': '–ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å',
    'generate.batch.button': '–ú–∞—Å—Å–æ–≤–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è',
    'generate.progress': '–û–±—Ä–∞–±–æ—Ç–∫–∞ {current}/{total} —Å–ª–æ—ë–≤...',
    // ...
  },
  ja: {
    'generate.prompt.label': '„Éó„É≠„É≥„Éó„Éà:',
    'generate.prompt.placeholder': '„Éó„É≠„É≥„Éó„Éà„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ...',
    'generate.button': 'ÁîüÊàê',
    'generate.batch.button': '„Éê„ÉÉ„ÉÅÁîüÊàê',
    'generate.progress': '{current}/{total} „É¨„Ç§„É§„Éº„ÇíÂá¶ÁêÜ‰∏≠...',
    // ...
  }
};
// –•–µ–ª–ø–µ—Ä –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–µ—Ä–µ–≤–æ–¥–∞
export function t(key: keyof TranslationStrings, lang: Language, params?: Record<string, any>): string {
  let text = translations[lang][key] || translations['en'][key];
  // –ü–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ {current}, {total}, etc.
  if (params) {
    for (const [k, v] of Object.entries(params)) {
      text = text.replace(`{${k}}`, String(v));
    }
  }
  return text;
}
```
**UI –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** (`src/ui/main.ts`):
```typescript
class PluginUI {
  private currentLanguage: Language = 'en';
  async init() {
    // –ó–∞–≥—Ä—É–∑–∏—Ç—å —è–∑—ã–∫ –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫
    const settings = await this.loadSettings();
    this.currentLanguage = settings.language || 'en';
    // –ü—Ä–∏–º–µ–Ω–∏—Ç—å –ø–µ—Ä–µ–≤–æ–¥—ã
    this.applyTranslations();
  }
  applyTranslations() {
    // –û–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
    document.querySelectorAll('[data-i18n]').forEach(el => {
      const key = el.getAttribute('data-i18n') as keyof TranslationStrings;
      el.textContent = t(key, this.currentLanguage);
    });
    // –û–±–Ω–æ–≤–∏—Ç—å placeholders
    document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
      const key = el.getAttribute('data-i18n-placeholder') as keyof TranslationStrings;
      (el as HTMLInputElement).placeholder = t(key, this.currentLanguage);
    });
  }
  async changeLanguage(lang: Language) {
    this.currentLanguage = lang;
    // –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö
    const settings = await this.loadSettings();
    settings.language = lang;
    await this.saveSettings(settings);
    // –ü—Ä–∏–º–µ–Ω–∏—Ç—å –ø–µ—Ä–µ–≤–æ–¥—ã
    this.applyTranslations();
  }
}
```
**HTML –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ** (`src/ui/index.html`):
```html
<!-- –î–æ–±–∞–≤–∏—Ç—å data-i18n –∞—Ç—Ä–∏–±—É—Ç—ã -->
<label data-i18n="generate.prompt.label">Prompt:</label>
<textarea
  id="prompt"
  data-i18n-placeholder="generate.prompt.placeholder"
  placeholder="Enter your prompt..."
></textarea>
<button id="generate-btn" data-i18n="generate.button">Generate</button>
<!-- Settings: –≤—ã–±–æ—Ä —è–∑—ã–∫–∞ -->
<div class="section">
  <label data-i18n="settings.language.label">Language:</label>
  <select id="language-select">
    <option value="en">English</option>
    <option value="ru">–†—É—Å—Å–∫–∏–π</option>
    <option value="ja">Êó•Êú¨Ë™û</option>
  </select>
</div>
```
## UI –¥–ª—è –≤—ã–±–æ—Ä–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
**–û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π Settings Panel** (`src/ui/index.html`):
```html
<div id="settings-panel" class="panel">
  <!-- 1. –í—ã–±–æ—Ä —è–∑—ã–∫–∞ -->
  <div class="section">
    <label data-i18n="settings.language.label">Language:</label>
    <select id="language-select">
      <option value="en">English</option>
      <option value="ru">–†—É—Å—Å–∫–∏–π</option>
      <option value="ja">Êó•Êú¨Ë™û</option>
    </select>
  </div>
  <!-- 2. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏ -->
  <div class="section">
    <h3 data-i18n="settings.providers.title">AI Providers</h3>
    <!-- –°–ø–∏—Å–æ–∫ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π -->
    <div id="provider-configs-list">
      <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è -->
      <!--
      <div class="provider-config-item">
        <input type="radio" name="active-provider" value="config-id">
        <span class="provider-name">GPT-4o Production</span>
        <button class="btn-edit">Edit</button>
        <button class="btn-delete">Delete</button>
      </div>
      -->
    </div>
    <button id="add-provider-btn" class="btn-primary">
      ‚ûï Add Provider Configuration
    </button>
  </div>
</div>
<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ: Add/Edit Provider Config -->
<div id="provider-config-modal" class="modal" style="display: none;">
  <div class="modal-content">
    <h3>Add Provider Configuration</h3>
    <!-- –®–∞–≥ 1: –í—ã–±–æ—Ä –±–∞–∑–æ–≤–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ -->
    <label>Select Provider:</label>
    <select id="base-provider-select">
      <optgroup label="Yandex Cloud">
        <option value="yandex-gpt5-lite">
          YandexGPT 5 Lite - –°–∞–º–∞—è –±—ã—Å—Ç—Ä–∞—è –º–æ–¥–µ–ª—å
        </option>
        <option value="yandex-gpt5-pro">
          YandexGPT 5 Pro - –ë–∞–ª–∞–Ω—Å —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏ –∫–∞—á–µ—Å—Ç–≤–∞
        </option>
        <!-- ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ Yandex –º–æ–¥–µ–ª–∏ -->
      </optgroup>
      <optgroup label="OpenAI">
        <option value="openai-gpt4o">
          GPT-4o - –°–∞–º–∞—è —É–º–Ω–∞—è –º–æ–¥–µ–ª—å ($5/$20 per 1M)
        </option>
        <option value="openai-gpt4o-mini">
          GPT-4o Mini - –î–µ—à—ë–≤–∞—è –∏ –±—ã—Å—Ç—Ä–∞—è ($0.15/$0.6 per 1M)
        </option>
      </optgroup>
      <optgroup label="Anthropic Claude">
        <option value="claude-35-haiku">
          Claude 3.5 Haiku - –°–∞–º—ã–π –±—ã—Å—Ç—Ä—ã–π ($1/$5 per 1M)
        </option>
        <option value="claude-35-sonnet">
          Claude 3.5 Sonnet - –õ—É—á—à–∏–π –¥–ª—è –∫—Ä–µ–∞—Ç–∏–≤–∞ ($3/$15 per 1M)
        </option>
      </optgroup>
      <!-- –û—Å—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã -->
    </select>
    <!-- –î–µ—Ç–∞–ª–∏ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ -->
    <div id="provider-details" class="info-box">
      <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –∏–∑ PROVIDER_CONFIGS -->
    </div>
    <!-- –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ -->
    <label>Configuration Name:</label>
    <input type="text" id="config-name" placeholder="My GPT-4o Production">
    <label>API Key:</label>
    <input type="password" id="config-apikey" placeholder="sk-...">
    <a href="#" id="apikey-help-link">How to get API key?</a>
    <!-- –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: Custom URL (–¥–ª—è OpenAI-compatible) -->
    <div id="custom-url-section" style="display: none;">
      <label>Custom API URL:</label>
      <input type="text" id="config-custom-url">
    </div>
    <!-- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ü–µ–Ω -->
    <div class="pricing-section">
      <h4>Token Pricing (per 1M tokens)</h4>
      <label>Input: $</label>
      <input type="number" id="pricing-input" step="0.01">
      <label>Output: $</label>
      <input type="number" id="pricing-output" step="0.01">
      <button id="reset-pricing-btn" class="btn-link">Reset to defaults</button>
    </div>
    <div class="button-group">
      <button id="save-provider-config-btn" class="btn-primary">Save</button>
      <button class="btn-secondary">Cancel</button>
    </div>
  </div>
</div>
```
## manifest.json –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
```json
{
  "allowedDomains": [
    "https://proxy.uixray.tech",        // Yandex proxy
    "https://api.openai.com",
    "https://*.openai.azure.com",
    "https://api.anthropic.com",        // Claude (—Ç—Ä–µ–±—É–µ—Ç –ø—Ä–æ–∫—Å–∏)
    "https://generativelanguage.googleapis.com", // Gemini
    "https://api.mistral.ai",
    "https://api.groq.com",
    "https://api.cohere.ai"
  ]
}
```
**–ü–†–û–ë–õ–ï–ú–ê:** Claude API —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–æ–∫—Å–∏ –¥–ª—è CORS (–∫–∞–∫ Yandex). –ù—É–∂–Ω–æ:
- –õ–∏–±–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –ø—Ä–æ–∫—Å–∏ –Ω–∞ https://proxy.uixray.tech
- –õ–∏–±–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é: "Claude requires CORS proxy. Instructions..."
## –ú–∞—Å—Å–æ–≤–æ–µ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Å–ª–æ—ë–≤
### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
**–§–∞–π–ª: `src/shared/types.ts`** (–¥–æ–±–∞–≤–∏—Ç—å):
```typescript
// –ü—Ä–µ—Å–µ—Ç –¥–ª—è –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è
export interface RenamePreset {
  id: string;
  name: string;
  type: 'bem' | 'camelCase' | 'snakeCase' | 'kebabCase' | 'custom';
  rules: RenameRule[];
  createdAt: number;
  updatedAt: number;
}
// –ü—Ä–∞–≤–∏–ª–æ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è
export interface RenameRule {
  pattern: string;          // Regex pattern –¥–ª—è –ø–æ–∏—Å–∫–∞
  replacement: string;      // –ó–∞–º–µ–Ω–∞ (–º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å $1, $2 –¥–ª—è –≥—Ä—É–ø–ø)
  nodeTypes?: ('FRAME' | 'GROUP' | 'TEXT')[];  // –¢–∏–ø—ã —É–∑–ª–æ–≤
  caseSensitive?: boolean;
}
// –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –∏–∑–º–µ–Ω–µ–Ω–∏–π
export interface RenamePreview {
  nodeId: string;
  nodeName: string;
  oldName: string;
  newName: string;
  nodeType: string;
  depth: number;            // –ì–ª—É–±–∏–Ω–∞ –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏ (–¥–ª—è UI)
}
export interface RenameSettings {
  presets: RenamePreset[];
  lastUsedPresetId?: string;
  lastUpdated: number;
}
```
**–ü—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–µ—Å–µ—Ç—ã** (`src/shared/constants.ts`):
```typescript
export const DEFAULT_RENAME_PRESETS: RenamePreset[] = [
  {
    id: 'bem',
    name: 'BEM (Block Element Modifier)',
    type: 'bem',
    rules: [
      {
        pattern: '^(.+?)\\s*[-_]\\s*(.+)$',
        replacement: '$1__$2',
        nodeTypes: ['FRAME', 'GROUP'],
        caseSensitive: false
      },
      {
        pattern: '\\s+',
        replacement: '-',
        caseSensitive: false
      }
    ],
    createdAt: Date.now(),
    updatedAt: Date.now()
  },
  {
    id: 'camelCase',
    name: 'Camel Case',
    type: 'camelCase',
    rules: [
      {
        pattern: '[\\s-_]+(.)',
        replacement: (match, char) => char.toUpperCase(),
        caseSensitive: false
      },
      {
        pattern: '^(.)',
        replacement: (match, char) => char.toLowerCase(),
        caseSensitive: false
      }
    ],
    createdAt: Date.now(),
    updatedAt: Date.now()
  },
  {
    id: 'snakeCase',
    name: 'Snake Case',
    type: 'snakeCase',
    rules: [
      {
        pattern: '[\\s-]+',
        replacement: '_',
        caseSensitive: false
      },
      {
        pattern: '([a-z])([A-Z])',
        replacement: '$1_$2',
        caseSensitive: true
      }
    ],
    createdAt: Date.now(),
    updatedAt: Date.now()
  },
  {
    id: 'kebabCase',
    name: 'Kebab Case',
    type: 'kebabCase',
    rules: [
      {
        pattern: '[\\s_]+',
        replacement: '-',
        caseSensitive: false
      },
      {
        pattern: '([a-z])([A-Z])',
        replacement: '$1-$2',
        caseSensitive: true
      }
    ],
    createdAt: Date.now(),
    updatedAt: Date.now()
  }
];
```
### –õ–æ–≥–∏–∫–∞ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è
**–§–∞–π–ª: `src/sandbox/rename-helpers.ts`** (–ù–û–í–´–ô):
```typescript
import { RenamePreset, RenamePreview } from '../shared/types';
// –ü—Ä–æ–≤–µ—Ä–∫–∞: –Ω—É–∂–Ω–æ –ª–∏ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å —É–∑–µ–ª
function shouldIgnoreNode(node: SceneNode): boolean {
  // –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ —Å–ª–æ–∏ –≤–Ω—É—Ç—Ä–∏ –Ω–∏—Ö
  if (node.type === 'COMPONENT' || node.type === 'COMPONENT_SET') {
    return true;
  }
  // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–æ–¥–∏—Ç–µ–ª–µ–π - –≤–Ω—É—Ç—Ä–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞?
  let parent = node.parent;
  while (parent && parent.type !== 'PAGE') {
    if (parent.type === 'COMPONENT' || parent.type === 'COMPONENT_SET') {
      return true;
    }
    parent = parent.parent;
  }
  // –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –≤–µ–∫—Ç–æ—Ä—ã
  if (node.type === 'VECTOR' || node.type === 'STAR' ||
      node.type === 'LINE' || node.type === 'ELLIPSE' ||
      node.type === 'POLYGON' || node.type === 'BOOLEAN_OPERATION') {
    return true;
  }
  // –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –≥—Ä—É–ø–ø—ã —Å –≤–µ–∫—Ç–æ—Ä–∞–º–∏ –≤–Ω—É—Ç—Ä–∏
  if (node.type === 'GROUP') {
    const hasOnlyVectors = checkIfOnlyVectors(node);
    if (hasOnlyVectors) {
      return true;
    }
  }
  return false;
}
// –ü—Ä–æ–≤–µ—Ä–∫–∞: –≥—Ä—É–ø–ø–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ –≤–µ–∫—Ç–æ—Ä—ã
function checkIfOnlyVectors(group: GroupNode): boolean {
  if (group.children.length === 0) return false;
  for (const child of group.children) {
    const childType = child.type;
    if (childType !== 'VECTOR' &&
        childType !== 'STAR' &&
        childType !== 'LINE' &&
        childType !== 'ELLIPSE' &&
        childType !== 'POLYGON' &&
        childType !== 'BOOLEAN_OPERATION') {
      return false;  // –ï—Å—Ç—å –Ω–µ-–≤–µ–∫—Ç–æ—Ä–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç
    }
  }
  return true;  // –¢–æ–ª—å–∫–æ –≤–µ–∫—Ç–æ—Ä—ã
}
// –ü—Ä–∏–º–µ–Ω–∏—Ç—å –ø—Ä–∞–≤–∏–ª–∞ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è –∫ —Å—Ç—Ä–æ–∫–µ
function applyRenameRules(
  name: string,
  rules: RenameRule[]
): string {
  let result = name;
  for (const rule of rules) {
    const flags = rule.caseSensitive ? 'g' : 'gi';
    const regex = new RegExp(rule.pattern, flags);
    result = result.replace(regex, rule.replacement);
  }
  return result.trim();
}
// –°–æ–±—Ä–∞—Ç—å –ø—Ä–µ–≤—å—é –∏–∑–º–µ–Ω–µ–Ω–∏–π
export async function generateRenamePreview(
  preset: RenamePreset
): Promise<RenamePreview[]> {
  const selection = figma.currentPage.selection;
  const previews: RenamePreview[] = [];
  if (selection.length === 0) {
    throw new Error('No layers selected');
  }
  // –†–µ–∫—É—Ä—Å–∏–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±—Ö–æ–¥–∞
  function processNode(node: SceneNode, depth: number = 0) {
    // –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ –≤–µ–∫—Ç–æ—Ä—ã
    if (shouldIgnoreNode(node)) {
      return;
    }
    // –û–±—Ä–∞–±–æ—Ç–∞—Ç—å —Ç–æ–ª—å–∫–æ Frame, Group, Text
    if (node.type === 'FRAME' ||
        node.type === 'GROUP' ||
        node.type === 'TEXT') {
      const oldName = node.name;
      const newName = applyRenameRules(oldName, preset.rules);
      if (oldName !== newName) {
        previews.push({
          nodeId: node.id,
          nodeName: node.name,
          oldName,
          newName,
          nodeType: node.type,
          depth
        });
      }
    }
    // –†–µ–∫—É—Ä—Å–∏–≤–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –¥–µ—Ç–µ–π
    if ('children' in node) {
      for (const child of node.children) {
        processNode(child, depth + 1);
      }
    }
  }
  // –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∂–¥—ã–π –≤—ã–¥–µ–ª–µ–Ω–Ω—ã–π —É–∑–µ–ª
  for (const node of selection) {
    processNode(node);
  }
  return previews;
}
// –ü—Ä–∏–º–µ–Ω–∏—Ç—å –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ
export async function applyRenaming(
  previews: RenamePreview[]
): Promise<{ renamed: number }> {
  let renamed = 0;
  for (const preview of previews) {
    const node = await figma.getNodeByIdAsync(preview.nodeId);
    if (node) {
      node.name = preview.newName;
      renamed++;
    }
  }
  return { renamed };
}
```
### UI –¥–ª—è –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è
**–§–∞–π–ª: `src/ui/index.html`** (–¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –≤–∫–ª–∞–¥–∫—É):
```html
<div class="tabs">
  <div class="tab" data-tab="generate">Generate</div>
  <div class="tab" data-tab="settings">Settings</div>
  <div class="tab" data-tab="data">Data</div>
  <div class="tab" data-tab="rename">Rename</div>  <!-- –ù–û–í–ê–Ø –í–ö–õ–ê–î–ö–ê -->
</div>
<!-- Rename Panel -->
<div id="rename-panel" class="panel" style="display: none;">
  <!-- 1. –í—ã–±–æ—Ä –ø—Ä–µ—Å–µ—Ç–∞ -->
  <div class="section">
    <label>Rename Preset:</label>
    <select id="rename-preset-select">
      <option value="">-- Select Preset --</option>
      <option value="bem">BEM (Block Element Modifier)</option>
      <option value="camelCase">Camel Case</option>
      <option value="snakeCase">Snake Case</option>
      <option value="kebabCase">Kebab Case</option>
      <option value="custom">Custom Rules...</option>
    </select>
  </div>
  <!-- 2. –û–ø–∏—Å–∞–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –ø—Ä–µ—Å–µ—Ç–∞ -->
  <div id="preset-description" class="info-box">
    <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è -->
  </div>
  <!-- 3. –ö–Ω–æ–ø–∫–∞ Preview -->
  <button id="rename-preview-btn" class="btn-primary" disabled>
    üîç Preview Changes
  </button>
  <!-- 4. –¢–∞–±–ª–∏—Ü–∞ –ø—Ä–µ–≤—å—é –∏–∑–º–µ–Ω–µ–Ω–∏–π -->
  <div id="rename-preview-container" style="display: none;">
    <h3>Preview Changes:</h3>
    <div class="preview-stats">
      <span id="preview-count">0 layers will be renamed</span>
    </div>
    <div class="preview-table-container">
      <table class="preview-table">
        <thead>
          <tr>
            <th>Type</th>
            <th>Old Name</th>
            <th>‚Üí</th>
            <th>New Name</th>
          </tr>
        </thead>
        <tbody id="preview-table-body">
          <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è -->
        </tbody>
      </table>
    </div>
    <div class="button-group">
      <button id="rename-apply-btn" class="btn-primary">
        ‚úì Apply Renaming
      </button>
      <button id="rename-cancel-btn" class="btn-secondary">
        Cancel
      </button>
    </div>
  </div>
  <!-- 5. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ –ø—Ä–µ—Å–µ—Ç–∞–º–∏ -->
  <div class="section" style="margin-top: 20px;">
    <h3>Custom Presets:</h3>
    <button id="manage-rename-presets-btn" class="btn-secondary">
      ‚öôÔ∏è Manage Presets
    </button>
  </div>
</div>
<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ: Manage Rename Presets -->
<div id="manage-rename-presets-modal" class="modal" style="display: none;">
  <div class="modal-content">
    <h3>Manage Rename Presets</h3>
    <div id="custom-presets-list">
      <!-- –°–ø–∏—Å–æ–∫ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –ø—Ä–µ—Å–µ—Ç–æ–≤ -->
    </div>
    <button id="add-rename-preset-btn" class="btn-primary">
      ‚ûï Add Custom Preset
    </button>
    <button class="btn-secondary">Close</button>
  </div>
</div>
```
### –°–æ–æ–±—â–µ–Ω–∏—è (UI ‚Üî Sandbox)
**–§–∞–π–ª: `src/shared/messages.ts`** (–¥–æ–±–∞–≤–∏—Ç—å):
```typescript
// UI ‚Üí Sandbox
interface GenerateRenamePreviewRequest {
  type: 'generate-rename-preview';
  id: string;
  presetId: string;
}
interface ApplyRenamingRequest {
  type: 'apply-renaming';
  id: string;
  previews: RenamePreview[];
}
interface LoadRenamePresetsRequest {
  type: 'load-rename-presets';
  id: string;
}
interface SaveRenamePresetsRequest {
  type: 'save-rename-presets';
  id: string;
  settings: RenameSettings;
}
// Sandbox ‚Üí UI
interface RenamePreviewResponse {
  type: 'rename-preview-generated';
  id: string;
  previews: RenamePreview[];
}
interface RenamingAppliedResponse {
  type: 'renaming-applied';
  id: string;
  renamed: number;
}
interface RenamePresetsLoadedResponse {
  type: 'rename-presets-loaded';
  id: string;
  settings: RenameSettings;
}
```
### Storage –¥–ª—è –ø—Ä–µ—Å–µ—Ç–æ–≤
**–§–∞–π–ª: `src/sandbox/storage-manager.ts`** (–¥–æ–±–∞–≤–∏—Ç—å):
```typescript
private renameSettingsCache: RenameSettings | null = null;
async loadRenameSettings(): Promise<RenameSettings> {
  if (this.renameSettingsCache) {
    return this.renameSettingsCache;
  }
  const data = await figma.clientStorage.getAsync(STORAGE_KEY_RENAME_SETTINGS);
  const settings: RenameSettings = data || {
    presets: DEFAULT_RENAME_PRESETS,
    lastUpdated: Date.now()
  };
  this.renameSettingsCache = settings;
  return settings;
}
async saveRenameSettings(settings: RenameSettings): Promise<void> {
  settings.lastUpdated = Date.now();
  await figma.clientStorage.setAsync(STORAGE_KEY_RENAME_SETTINGS, settings);
  this.renameSettingsCache = settings;
}
```
### –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤ Sandbox
**–§–∞–π–ª: `src/sandbox/code.ts`** (–¥–æ–±–∞–≤–∏—Ç—å):
```typescript
private async handleGenerateRenamePreview(message: GenerateRenamePreviewRequest): Promise<void> {
  try {
    const settings = await this.storageManager.loadRenameSettings();
    const preset = settings.presets.find(p => p.id === message.presetId);
    if (!preset) {
      throw new Error('Preset not found');
    }
    const previews = await generateRenamePreview(preset);
    sendToUI({
      type: 'rename-preview-generated',
      id: message.id,
      previews
    });
  } catch (error) {
    sendToUI({
      type: 'notification',
      level: 'error',
      message: error.message
    });
  }
}
private async handleApplyRenaming(message: ApplyRenamingRequest): Promise<void> {
  try {
    const result = await applyRenaming(message.previews);
    sendToUI({
      type: 'renaming-applied',
      id: message.id,
      renamed: result.renamed
    });
    sendToUI({
      type: 'notification',
      level: 'success',
      message: `Renamed ${result.renamed} layers`
    });
  } catch (error) {
    sendToUI({
      type: 'notification',
      level: 'error',
      message: error.message
    });
  }
}
```
## –ü–æ—Ä—è–¥–æ–∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
### –≠—Ç–∞–ø 0: –ú–∞—Å—Å–æ–≤–æ–µ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Å–ª–æ—ë–≤ (2-3 —á–∞—Å–∞) - –ù–û–í–ê–Ø –§–ò–ß–ê
**–§–∞–π–ª—ã:**
- `src/shared/types.ts` - –¥–æ–±–∞–≤–∏—Ç—å RenamePreset, RenameRule, RenamePreview
- `src/shared/constants.ts` - DEFAULT_RENAME_PRESETS (BEM, camelCase, etc.)
- `src/sandbox/rename-helpers.ts` - –ù–û–í–´–ô: –ª–æ–≥–∏–∫–∞ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è
- `src/shared/messages.ts` - —Ç–∏–ø—ã —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è rename
- `src/sandbox/storage-manager.ts` - load/save –ø—Ä–µ—Å–µ—Ç–æ–≤
- `src/sandbox/code.ts` - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
- `src/ui/index.html` - –Ω–æ–≤–∞—è –≤–∫–ª–∞–¥–∫–∞ "Rename"
- `src/ui/main.ts` - UI –ª–æ–≥–∏–∫–∞ –¥–ª—è rename
- `src/ui/styles.css` - —Å—Ç–∏–ª–∏ –¥–ª—è —Ç–∞–±–ª–∏—Ü—ã –ø—Ä–µ–≤—å—é
**–ó–∞–¥–∞—á–∏:**
1. –°–æ–∑–¥–∞—Ç—å –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–µ—Å–µ—Ç—ã (BEM, camelCase, snakeCase, kebabCase)
2. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å shouldIgnoreNode() - –ø—Ä–æ–ø—É—Å–∫ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏ –≤–µ–∫—Ç–æ—Ä–æ–≤
3. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å generateRenamePreview() - –ø–æ–∫–∞–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π –¥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è
4. UI —Ç–∞–±–ª–∏—Ü–∞ —Å –ø—Ä–µ–≤—å—é: "Old Name" ‚Üí "New Name"
5. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø–æ –∫–Ω–æ–ø–∫–µ
6. –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ–∑–¥–∞–≤–∞—Ç—å –∫–∞—Å—Ç–æ–º–Ω—ã–µ –ø—Ä–µ—Å–µ—Ç—ã (–¥–ª—è –±—É–¥—É—â–∏—Ö –≤–µ—Ä—Å–∏–π)
**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- –í—ã–¥–µ–ª–∏—Ç—å Frame —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Å–ª–æ—è–º–∏ (—Ç–µ–∫—Å—Ç, —Ñ—Ä–µ–π–º—ã, –≥—Ä—É–ø–ø—ã, –≤–µ–∫—Ç–æ—Ä—ã, –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã)
- –í—ã–±—Ä–∞—Ç—å –ø—Ä–µ—Å–µ—Ç BEM ‚Üí Preview
- –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏ –≤–µ–∫—Ç–æ—Ä—ã –ù–ï –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤—ã–≤–∞—é—Ç—Å—è
- –ü—Ä–∏–º–µ–Ω–∏—Ç—å ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- –ü–æ–≤—Ç–æ—Ä–∏—Ç—å –¥–ª—è –¥—Ä—É–≥–∏—Ö –ø—Ä–µ—Å–µ—Ç–æ–≤
---
### –≠—Ç–∞–ø 1: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ (2-3 —á–∞—Å–∞)
**–§–∞–π–ª—ã:**
- `src/shared/providers.ts` - –ù–û–í–´–ô: –≤—Å–µ PROVIDER_CONFIGS
- `src/shared/types.ts` - –æ–±–Ω–æ–≤–∏—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã Settings, –¥–æ–±–∞–≤–∏—Ç—å UserProviderConfig
- `src/shared/constants.ts` - –¥–æ–±–∞–≤–∏—Ç—å STORAGE_KEY_SAVED_PROMPTS
- `src/sandbox/storage-manager.ts` - –¥–æ–±–∞–≤–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é v1‚Üív2
**–ó–∞–¥–∞—á–∏:**
1. –°–æ–∑–¥–∞—Ç—å –ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ PROVIDER_CONFIGS (Yandex, OpenAI, Claude, Gemini, Mistral, Groq, Cohere)
2. –î–æ–±–∞–≤–∏—Ç—å –æ–ø–∏—Å–∞–Ω–∏—è –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤ –∫–∞–∂–¥–æ–π –º–æ–¥–µ–ª–∏ (–Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º, —Ä—É—Å—Å–∫–∏–π/—è–ø–æ–Ω—Å–∫–∏–π –ø–æ—Ç–æ–º —á–µ—Ä–µ–∑ i18n)
3. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –º–∏–≥—Ä–∞—Ü–∏–∏ —Å—Ç–∞—Ä—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é
**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- –û—Ç–∫—Ä—ã—Ç—å –ø–ª–∞–≥–∏–Ω —Å–æ —Å—Ç–∞—Ä—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
- –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–ª–∏
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ
---
### –≠—Ç–∞–ø 2: Batch Processing (1-2 —á–∞—Å–∞)
**–§–∞–π–ª—ã:**
- `src/shared/messages.ts` - –¥–æ–±–∞–≤–∏—Ç—å GenerateBatchRequest, BatchProgressResponse
- `src/sandbox/code.ts` - –¥–æ–±–∞–≤–∏—Ç—å handleGenerateBatch()
- `src/sandbox/figma-helpers.ts` - —É–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ getSelectedTextNodes() —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π
- `src/ui/main.ts` - –¥–æ–±–∞–≤–∏—Ç—å UI –¥–ª—è –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–∞
- `src/ui/index.html` - –¥–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É "Batch Generate" –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä
**–ó–∞–¥–∞—á–∏:**
1. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É —Å –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–æ–º
2. –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å "Processing 3/10 layers..." –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
3. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ - –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –µ—Å–ª–∏ –æ–¥–∏–Ω —Å–ª–æ–π failed
4. –ò—Ç–æ–≥–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ: "Processed 8/10 layers (2 failed)"
**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- –í—ã–¥–µ–ª–∏—Ç—å Frame —Å 5+ –≤–ª–æ–∂–µ–Ω–Ω—ã–º–∏ TEXT —Å–ª–æ—è–º–∏
- –ù–∞–∂–∞—Ç—å "Batch Generate"
- –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤—Å–µ —Å–ª–æ–∏ –æ–±—Ä–∞–±–æ—Ç–∞–ª–∏—Å—å
---
### –≠—Ç–∞–ø 3: Saved Prompts Library (2-3 —á–∞—Å–∞)
**–§–∞–π–ª—ã:**
- `src/shared/types.ts` - –¥–æ–±–∞–≤–∏—Ç—å SavedPrompt, SavedPromptsLibrary
- `src/sandbox/storage-manager.ts` - –¥–æ–±–∞–≤–∏—Ç—å load/save –¥–ª—è –ø—Ä–æ–º–ø—Ç–æ–≤
- `src/shared/messages.ts` - –¥–æ–±–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –ø—Ä–æ–º–ø—Ç–æ–≤
- `src/sandbox/code.ts` - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ load/save –ø—Ä–æ–º–ø—Ç–æ–≤
- `src/ui/index.html` - –º–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ –¥–ª—è Load/Save
- `src/ui/main.ts` - –ª–æ–≥–∏–∫–∞ UI –¥–ª—è –ø—Ä–æ–º–ø—Ç–æ–≤
**–ó–∞–¥–∞—á–∏:**
1. –•—Ä–∞–Ω–µ–Ω–∏–µ –≤ figma.clientStorage
2. UI –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ–º–ø—Ç–æ–≤ (–º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å–æ —Å–ø–∏—Å–∫–æ–º)
3. UI –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–º–ø—Ç–∞ (–Ω–∞–∑–≤–∞–Ω–∏–µ, –∫–∞—Ç–µ–≥–æ—Ä–∏—è, —Ç–µ–≥–∏)
4. –°—á—ë—Ç—á–∏–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π (usageCount++)
5. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–º–ø—Ç–æ–≤
- –ó–∞–≥—Ä—É–∑–∏—Ç—å –ø—Ä–æ–º–ø—Ç –∏–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ prompts —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è –º–µ–∂–¥—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ (—á–µ—Ä–µ–∑ Figma –∞–∫–∫–∞—É–Ω—Ç)
---
### –≠—Ç–∞–ø 4: –ù–æ–≤—ã–π UI –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ (3-4 —á–∞—Å–∞)
**–§–∞–π–ª—ã:**
- `src/ui/index.html` - –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–¥–µ–ª–∞—Ç—å Settings Panel
- `src/ui/main.ts` - –Ω–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏
- `src/ui/styles.css` - —Å—Ç–∏–ª–∏ –¥–ª—è –Ω–æ–≤—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- `src/sandbox/api-client.ts` - –æ–±–Ω–æ–≤–∏—Ç—å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –Ω–æ–≤—ã–º–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è–º–∏
**–ó–∞–¥–∞—á–∏:**
1. –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
2. –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ "Add Provider" —Å –≤—ã–±–æ—Ä–æ–º –∏–∑ PROVIDER_CONFIGS
3. –ü–æ–∫–∞–∑ –æ–ø–∏—Å–∞–Ω–∏—è/–ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤/—Ü–µ–Ω –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
4. –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ü–µ–Ω (–¥–ª—è –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã—Ö –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤)
5. –ê–∫—Ç–∏–≤–∞—Ü–∏—è/–¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
6. –£–¥–∞–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- –°–æ–∑–¥–∞—Ç—å 2-3 –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É –Ω–∏–º–∏
- –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç —Å –∫–∞–∂–¥–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –ø–æ–¥—Å—á—ë—Ç–∞ —Å—Ç–æ–∏–º–æ—Å—Ç–∏
---
### –≠—Ç–∞–ø 5: i18n (2-3 —á–∞—Å–∞)
**–§–∞–π–ª—ã:**
- `src/shared/i18n.ts` - –ù–û–í–´–ô: –≤—Å–µ –ø–µ—Ä–µ–≤–æ–¥—ã
- `src/ui/main.ts` - —Ñ—É–Ω–∫—Ü–∏—è applyTranslations()
- `src/ui/index.html` - –¥–æ–±–∞–≤–∏—Ç—å data-i18n –∞—Ç—Ä–∏–±—É—Ç—ã
- `src/shared/providers.ts` - –ø–µ—Ä–µ–≤–æ–¥—ã –æ–ø–∏—Å–∞–Ω–∏–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
**–ó–∞–¥–∞—á–∏:**
1. –°–æ–∑–¥–∞—Ç—å –ø–æ–ª–Ω—ã–π —Å–ª–æ–≤–∞—Ä—å –ø–µ—Ä–µ–≤–æ–¥–æ–≤ (en/ru/ja)
2. –î–æ–±–∞–≤–∏—Ç—å data-i18n –∞—Ç—Ä–∏–±—É—Ç—ã –∫–æ –≤—Å–µ–º —Ç–µ–∫—Å—Ç–æ–≤—ã–º —ç–ª–µ–º–µ–Ω—Ç–∞–º
3. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é t() —Å –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–æ–π –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
4. –î–æ–±–∞–≤–∏—Ç—å –≤—ã–±–æ—Ä —è–∑—ã–∫–∞ –≤ Settings
5. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ —è–∑—ã–∫–∞ –≤ clientStorage
**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —è–∑—ã–∫ –Ω–∞ —Ä—É—Å—Å–∫–∏–π - –≤–µ—Å—å UI –Ω–∞ —Ä—É—Å—Å–∫–æ–º
- –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –Ω–∞ —è–ø–æ–Ω—Å–∫–∏–π - –≤–µ—Å—å UI –Ω–∞ —è–ø–æ–Ω—Å–∫–æ–º
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤—ã–±–æ—Ä —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞
---
### –≠—Ç–∞–ø 6: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ API Client (1-2 —á–∞—Å–∞)
**–§–∞–π–ª—ã:**
- `src/sandbox/api-client.ts` - –æ–±–Ω–æ–≤–∏—Ç—å –º–µ—Ç–æ–¥—ã –¥–ª—è –Ω–æ–≤—ã—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
**–ó–∞–¥–∞—á–∏:**
1. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Claude API —Ñ–æ—Ä–º–∞—Ç–∞ (–æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç OpenAI)
2. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Gemini API —Ñ–æ—Ä–º–∞—Ç–∞
3. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Mistral/Groq/Cohere —Ñ–æ—Ä–º–∞—Ç–æ–≤
4. –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –æ—à–∏–±–æ–∫
5. –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –ø–æ–¥—Å—á—ë—Ç —Ç–æ–∫–µ–Ω–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç OpenAI-compatible API, —á—Ç–æ —É–ø—Ä–æ—Å—Ç–∏—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é.
---
### –≠—Ç–∞–ø 7: Proxy –¥–ª—è Claude (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, 1 —á–∞—Å)
**–§–∞–π–ª:** `D:\Dev\Claude projects\figma-yandex-proxy\server.js`
**–ó–∞–¥–∞—á–∏:**
1. –î–æ–±–∞–≤–∏—Ç—å endpoint `/api/claude` –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –ø—Ä–æ–∫—Å–∏
2. –ü—Ä–æ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ `https://api.anthropic.com/v1/messages`
3. –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ Claude (anthropic-version)
4. –û–±–Ω–æ–≤–∏—Ç—å manifest.json: –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å proxy –≤–º–µ—Å—Ç–æ –ø—Ä—è–º–æ–≥–æ URL
---
### –≠—Ç–∞–ø 8: –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∏ –∫–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞ (3-4 —á–∞—Å–∞)
**–§–∞–π–ª—ã:**
- `src/ui/modules/` - —Ä–∞–∑–±–∏—Ç—å main.ts –Ω–∞ –º–æ–¥—É–ª–∏
- `src/sandbox/providers/` - –ø–∞—Ç—Ç–µ—Ä–Ω Strategy –¥–ª—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
- `src/shared/validation.ts` - –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- `tests/` - —é–Ω–∏—Ç –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
- `package.json` - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Jest
**–ó–∞–¥–∞—á–∏:**
1. **–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ UI (1.5 —á–∞—Å–∞):**
   - –†–∞–∑–±–∏—Ç—å `main.ts` –Ω–∞ –º–æ–¥—É–ª–∏: GeneratePanel, SettingsPanel, DataPanel, RenamePanel
   - –°–æ–∑–¥–∞—Ç—å —Ö–µ–ª–ø–µ—Ä—ã: validation.ts, dom.ts, formatting.ts
   - –£–º–µ–Ω—å—à–∏—Ç—å —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å –º–µ–∂–¥—É –º–æ–¥—É–ª—è–º–∏
2. **–ê–±—Å—Ç—Ä–∞–∫—Ü–∏—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ (1 —á–∞—Å):**
   - –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å BaseProvider
   - –†–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞: OpenAIProvider, YandexProvider, ClaudeProvider, GeminiProvider, etc.
   - ProviderFactory –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
   - –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (—É–±—Ä–∞—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ)
3. **–í–∞–ª–∏–¥–∞—Ü–∏—è (0.5 —á–∞—Å–∞):**
   - validatePrompt(), validateApiKey(), validateUrl(), validateGenerationSettings()
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤–æ –≤—Å–µ—Ö —Ñ–æ—Ä–º–∞—Ö
   - –ü–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
4. **–¢–µ—Å—Ç—ã (1 —á–∞—Å):**
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Jest + ts-jest
   - –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
   - –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã –¥–ª—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
   - –¢–µ—Å—Ç—ã –¥–ª—è rename-helpers
   - Coverage > 70%
**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- –ó–∞–ø—É—Å—Ç–∏—Ç—å `npm test` ‚Üí –≤—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å coverage report
- –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ UI –º–æ–¥—É–ª–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ
---
### –≠—Ç–∞–ø 9: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ —Ñ–∏–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (1-2 —á–∞—Å–∞)
**–§–∞–π–ª—ã:**
- `README.md` - –æ–±–Ω–æ–≤–∏—Ç—å —Å –Ω–æ–≤—ã–º–∏ —Ñ–∏—á–∞–º–∏
- `FIGMA_PLUGIN_RULES.md` - –æ–±–Ω–æ–≤–∏—Ç—å –ø—Ä–∞–≤–∏–ª–∞
**–ó–∞–¥–∞—á–∏:**
1. –ó–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –Ω–æ–≤—ã–µ —Ñ–∏—á–∏
2. –î–æ–±–∞–≤–∏—Ç—å —Å–∫—Ä–∏–Ω—à–æ—Ç—ã UI
3. –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –ø–æ–ª—É—á–µ–Ω–∏—é API –∫–ª—é—á–µ–π –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
4. E2E —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
**–°—Ü–µ–Ω–∞—Ä–∏–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
- –ú–∏–≥—Ä–∞—Ü–∏—è —Å—Ç–∞—Ä—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
- –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π –¥–ª—è –≤—Å–µ—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
- Batch processing –Ω–∞ 10+ —Å–ª–æ—è—Ö
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ/–∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ–º–ø—Ç–æ–≤
- –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —è–∑—ã–∫–æ–≤
- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ü–µ–Ω
- –ü–æ–¥—Å—á—ë—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏
---
## –û–±—â–µ–µ –≤—Ä–µ–º—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
- –≠—Ç–∞–ø 0 (Rename): 2-3 —á–∞—Å–∞
- –≠—Ç–∞–ø 1 (–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞): 2-3 —á–∞—Å–∞
- –≠—Ç–∞–ø 2 (Batch): 1-2 —á–∞—Å–∞
- –≠—Ç–∞–ø 3 (Prompts): 2-3 —á–∞—Å–∞
- –≠—Ç–∞–ø 4 (UI –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤): 3-4 —á–∞—Å–∞
- –≠—Ç–∞–ø 5 (i18n): 2-3 —á–∞—Å–∞
- –≠—Ç–∞–ø 6 (API Client): 1-2 —á–∞—Å–∞
- –≠—Ç–∞–ø 7 (Proxy –¥–ª—è Claude): 1 —á–∞—Å
- –≠—Ç–∞–ø 8 (–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ + —Ç–µ—Å—Ç—ã): 3-4 —á–∞—Å–∞
- –≠—Ç–∞–ø 9 (–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è): 1-2 —á–∞—Å–∞
**–ò—Ç–æ–≥–æ: 18-27 —á–∞—Å–æ–≤** (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –æ–ø—ã—Ç–∞ –∏ —Å–∫–æ—Ä–æ—Å—Ç–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
### –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:
**–§–∞–∑–∞ 1: –§—É–Ω–¥–∞–º–µ–Ω—Ç (7-10 —á–∞—Å–æ–≤)**
- –≠—Ç–∞–ø 1 (–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤)
- –≠—Ç–∞–ø 8 (–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ - –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã + –≤–∞–ª–∏–¥–∞—Ü–∏—è)
- –≠—Ç–∞–ø 6 (API Client –¥–ª—è –Ω–æ–≤—ã—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤)
- –≠—Ç–∞–ø 7 (Proxy –¥–ª—è Claude - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
**–§–∞–∑–∞ 2: –ù–æ–≤—ã–µ —Ñ–∏—á–∏ (7-10 —á–∞—Å–æ–≤)**
- –≠—Ç–∞–ø 0 (–ú–∞—Å—Å–æ–≤–æ–µ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ)
- –≠—Ç–∞–ø 2 (Batch Processing)
- –≠—Ç–∞–ø 3 (Saved Prompts Library)
**–§–∞–∑–∞ 3: UI –∏ –ø–æ–ª–∏—Ä–æ–≤–∫–∞ (7-10 —á–∞—Å–æ–≤)**
- –≠—Ç–∞–ø 4 (–ù–æ–≤—ã–π UI –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤)
- –≠—Ç–∞–ø 5 (–ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å)
- –≠—Ç–∞–ø 8 (–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ UI - –º–æ–¥—É–ª–∏)
- –≠—Ç–∞–ø 8 (–¢–µ—Å—Ç—ã)
- –≠—Ç–∞–ø 9 (–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)
**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è (–ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–∞—è):**
–ú–æ–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å –ø–æ –æ–¥–Ω–æ–π —Ñ–∏—á–µ –∑–∞ —Ä–∞–∑ —Å –ø–æ–ª–Ω—ã–º —Ü–∏–∫–ª–æ–º (backend + UI + —Ç–µ—Å—Ç—ã + –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è), —á—Ç–æ–±—ã –ø–æ–ª—É—á–∞—Ç—å —Ä–∞–±–æ—á–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –±—ã—Å—Ç—Ä–µ–µ.
## –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è
### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ + –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ (–ö–†–ò–¢–ò–ß–ù–û)
1. **`src/shared/providers.ts`** (–ù–û–í–´–ô) - –≤—Å–µ PROVIDER_CONFIGS
2. **`src/shared/types.ts`** - –æ–±–Ω–æ–≤–∏—Ç—å Settings, –¥–æ–±–∞–≤–∏—Ç—å UserProviderConfig, RenamePreset
3. **`src/shared/validation.ts`** (–ù–û–í–´–ô) - –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
4. **`src/sandbox/storage-manager.ts`** - –º–∏–≥—Ä–∞—Ü–∏—è v1‚Üív2
5. **`src/sandbox/providers/`** (–ù–û–í–ê–Ø –î–ò–†–ï–ö–¢–û–†–ò–Ø):
   - `BaseProvider.ts` - –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å
   - `OpenAIProvider.ts`, `YandexProvider.ts`, `ClaudeProvider.ts`, etc.
   - `ProviderFactory.ts` - —Ñ–∞–±—Ä–∏–∫–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: –ú–∞—Å—Å–æ–≤–æ–µ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ
6. **`src/sandbox/rename-helpers.ts`** (–ù–û–í–´–ô) - –ª–æ–≥–∏–∫–∞ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è
7. **`src/ui/modules/RenamePanel.ts`** (–ù–û–í–´–ô) - UI –¥–ª—è rename
8. **`src/ui/index.html`** - –Ω–æ–≤–∞—è –≤–∫–ª–∞–¥–∫–∞ Rename
9. **`src/shared/constants.ts`** - DEFAULT_RENAME_PRESETS
### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: Batch Processing
10. **`src/sandbox/code.ts`** - handleGenerateBatch()
11. **`src/shared/messages.ts`** - –Ω–æ–≤—ã–µ —Ç–∏–ø—ã —Å–æ–æ–±—â–µ–Ω–∏–π
12. **`src/ui/modules/GeneratePanel.ts`** (–ù–û–í–´–ô) - –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä
### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 4: Prompts Library
13. **`src/shared/types.ts`** - SavedPrompt, SavedPromptsLibrary
14. **`src/sandbox/storage-manager.ts`** - load/save –ø—Ä–æ–º–ø—Ç–æ–≤
15. **`src/ui/modules/PromptLibraryModal.ts`** (–ù–û–í–´–ô) - –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 5: UI –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
16. **`src/ui/index.html`** - –Ω–æ–≤—ã–π Settings Panel
17. **`src/ui/modules/SettingsPanel.ts`** (–ù–û–í–´–ô) - –º–µ—Ç–æ–¥—ã —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏
18. **`src/ui/modules/ProviderConfigModal.ts`** (–ù–û–í–´–ô) - –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 6: i18n
19. **`src/shared/i18n.ts`** (–ù–û–í–´–ô) - –ø–µ—Ä–µ–≤–æ–¥—ã
20. **`src/ui/main.ts`** - applyTranslations()
21. **`src/ui/index.html`** - data-i18n –∞—Ç—Ä–∏–±—É—Ç—ã
### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 7: –¢–µ—Å—Ç—ã
22. **`tests/unit/validation.test.ts`** (–ù–û–í–´–ô)
23. **`tests/unit/providers.test.ts`** (–ù–û–í–´–ô)
24. **`tests/unit/rename-helpers.test.ts`** (–ù–û–í–´–ô)
25. **`package.json`** - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Jest
### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 8: Proxy (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
26. **`D:\Dev\Claude projects\figma-yandex-proxy\server.js`** - endpoint –¥–ª—è Claude
### –§–∞–π–ª—ã –¥–ª—è —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ (—Ä–∞–∑–±–∏—Ç—å –Ω–∞ –º–æ–¥—É–ª–∏):
27. **`src/ui/main.ts`** ‚Üí —Ä–∞–∑–±–∏—Ç—å –Ω–∞:
   - `modules/GeneratePanel.ts`
   - `modules/SettingsPanel.ts`
   - `modules/DataPanel.ts`
   - `modules/RenamePanel.ts`
28. **`src/ui/utils/`** (–ù–û–í–ê–Ø –î–ò–†–ï–ö–¢–û–†–ò–Ø):
   - `dom.ts` - —Ö–µ–ª–ø–µ—Ä—ã –¥–ª—è DOM
   - `formatting.ts` - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
## –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
–ü–æ—Å–ª–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–ª–∞–≥–∏–Ω –±—É–¥–µ—Ç –∏–º–µ—Ç—å:
‚úÖ **7+ AI –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤** —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º–∏ –æ–ø–∏—Å–∞–Ω–∏—è–º–∏ –∏ —Ü–µ–Ω–∞–º–∏:
- Yandex Cloud (8 –º–æ–¥–µ–ª–µ–π)
- OpenAI (2 –º–æ–¥–µ–ª–∏)
- Claude (3 –º–æ–¥–µ–ª–∏) - —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–æ–∫—Å–∏
- Gemini (2 –º–æ–¥–µ–ª–∏) - –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Ç–∏—Ä!
- Mistral AI
- Groq
- Cohere
‚úÖ **–ì–∏–±–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π:**
- –ù–µ—Å–∫–æ–ª—å–∫–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π –æ–¥–Ω–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
- –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º—ã–µ —Ü–µ–Ω—ã
- –ë—ã—Å—Ç—Ä–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏
‚úÖ **Batch Processing:**
- –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ —Å–ª–æ—ë–≤
- –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –ø–æ–∏—Å–∫ TEXT —É–∑–ª–æ–≤
‚úÖ **Saved Prompts Library:**
- –•—Ä–∞–Ω–µ–Ω–∏–µ –≤ figma.clientStorage (—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è)
- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ —Ç–µ–≥–∏
- –°—á—ë—Ç—á–∏–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π
‚úÖ **–ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å:**
- –ê–Ω–≥–ª–∏–π—Å–∫–∏–π (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- –†—É—Å—Å–∫–∏–π
- –Ø–ø–æ–Ω—Å–∫–∏–π
- –í—Å–µ UI —ç–ª–µ–º–µ–Ω—Ç—ã –ø–µ—Ä–µ–≤–µ–¥–µ–Ω—ã
‚úÖ **–£–ª—É—á—à–µ–Ω–Ω—ã–π UX:**
- –ò–Ω—Ç—É–∏—Ç–∏–≤–Ω—ã–π –≤—ã–±–æ—Ä –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ —Å –æ–ø–∏—Å–∞–Ω–∏—è–º–∏
- –ü–æ–Ω—è—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ü–µ–Ω–∞—Ö
- –£–¥–æ–±–Ω–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–æ–º–ø—Ç–æ–≤
‚úÖ **–ú–∞—Å—Å–æ–≤–æ–µ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ:**
- 4 –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –ø—Ä–µ—Å–µ—Ç–∞ (BEM, camelCase, snakeCase, kebabCase)
- –£–º–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è (–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏ –≤–µ–∫—Ç–æ—Ä–æ–≤)
- Preview –ø–µ—Ä–µ–¥ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º
- –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –æ–±—Ö–æ–¥ –≤—Å–µ—Ö –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —Å–ª–æ—ë–≤
## –í–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è
### –¢–µ—Å—Ç 1: –ú–∏–≥—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
```
1. –û—Ç–∫—Ä—ã—Ç—å –ø–ª–∞–≥–∏–Ω —Å–æ —Å—Ç–∞—Ä—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ (version: 1)
2. ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–ª–∏ –≤ –Ω–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç
3. ‚úÖ –°—Ç–∞—Ä—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç
4. ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏
```
### –¢–µ—Å—Ç 2: Batch Processing
```
1. –°–æ–∑–¥–∞—Ç—å Frame —Å 5 TEXT —Å–ª–æ—è–º–∏
2. –í—ã–¥–µ–ª–∏—Ç—å Frame
3. –ù–∞–∂–∞—Ç—å "Batch Generate"
4. ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–æ–≥—Ä–µ—Å—Å "Processing 1/5..."
5. ‚úÖ –í—Å–µ 5 —Å–ª–æ—ë–≤ –æ–±—Ä–∞–±–æ—Ç–∞–ª–∏—Å—å
6. ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å –∏—Ç–æ–≥–∞–º–∏
```
### –¢–µ—Å—Ç 3: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã
```
1. –°–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é "GPT-4o Prod" (OpenAI)
2. –°–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é "Yandex Lite Test" (Yandex)
3. –°–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é "Gemini Free" (Gemini)
4. –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ "GPT-4o Prod"
5. –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç
6. ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è GPT-4o
7. ‚úÖ –¶–µ–Ω–∞ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ ($5/$20 per 1M)
```
### –¢–µ—Å—Ç 4: Saved Prompts
```
1. –í–≤–µ—Å—Ç–∏ –ø—Ä–æ–º–ø—Ç "Write a catchy headline"
2. –ù–∞–∂–∞—Ç—å "Save Prompt"
3. –ù–∞–∑–≤–∞—Ç—å "Headline Generator", –∫–∞—Ç–µ–≥–æ—Ä–∏—è "Marketing"
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
5. –û—á–∏—Å—Ç–∏—Ç—å –ø–æ–ª–µ –ø—Ä–æ–º–ø—Ç–∞
6. –ù–∞–∂–∞—Ç—å "Load Saved"
7. –í—ã–±—Ä–∞—Ç—å "Headline Generator"
8. ‚úÖ –ü—Ä–æ–º–ø—Ç –∑–∞–≥—Ä—É–∑–∏–ª—Å—è –≤ –ø–æ–ª–µ
9. ‚úÖ usageCount —É–≤–µ–ª–∏—á–∏–ª—Å—è
```
### –¢–µ—Å—Ç 5: i18n
```
1. Settings ‚Üí Language ‚Üí –†—É—Å—Å–∫–∏–π
2. ‚úÖ –í–µ—Å—å UI –Ω–∞ —Ä—É—Å—Å–∫–æ–º
3. ‚úÖ –û–ø–∏—Å–∞–Ω–∏—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ –Ω–∞ —Ä—É—Å—Å–∫–æ–º
4. Settings ‚Üí Language ‚Üí Êó•Êú¨Ë™û
5. ‚úÖ –í–µ—Å—å UI –Ω–∞ —è–ø–æ–Ω—Å–∫–æ–º
6. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø–ª–∞–≥–∏–Ω
7. ‚úÖ –Ø–∑—ã–∫ —Å–æ—Ö—Ä–∞–Ω–∏–ª—Å—è
```
### –¢–µ—Å—Ç 6: –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ü–µ–Ω
```
1. –û—Ç–∫—Ä—ã—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
2. –ò–∑–º–µ–Ω–∏—Ç—å Input: $5 ‚Üí $3 (–∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–∞—è —Å–∫–∏–¥–∫–∞)
3. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
4. –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç
5. ‚úÖ –¶–µ–Ω–∞ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–∞ —Å —É—á—ë—Ç–æ–º –Ω–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
6. –ù–∞–∂–∞—Ç—å "Reset to defaults"
7. ‚úÖ –¶–µ–Ω—ã –≤–µ—Ä–Ω—É–ª–∏—Å—å –∫ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º
```
## –†–∏—Å–∫–∏ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
### ‚ö†Ô∏è CORS –¥–ª—è Claude
**–ü—Ä–æ–±–ª–µ–º–∞:** Claude API —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–æ–∫—Å–∏ (–∫–∞–∫ Yandex)
**–†–µ—à–µ–Ω–∏–µ:**
- –í–∞—Ä–∏–∞–Ω—Ç A: –†–∞—Å—à–∏—Ä–∏—Ç—å proxy.uixray.tech —Å endpoint `/api/claude`
- –í–∞—Ä–∏–∞–Ω—Ç B: –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –í–∞—Ä–∏–∞–Ω—Ç A (–¥–æ–±–∞–≤–∏—Ç—å –≤ –ø—Ä–æ–∫—Å–∏)
### ‚ö†Ô∏è API –∫–ª—é—á–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –Ω—É–∂–Ω—ã API –∫–ª—é—á–∏ –¥–ª—è –≤—Å–µ—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
**–†–µ—à–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫–∏ "How to get API key?" –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤ README
- –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –æ–ø—Ü–∏–∏ (Gemini free tier, LM Studio –ª–æ–∫–∞–ª—å–Ω–æ)
### ‚ö†Ô∏è Rate Limits
**–ü—Ä–æ–±–ª–µ–º–∞:** Batch processing –º–æ–∂–µ—Ç —É–ø–µ—Ä–µ—Ç—å—Å—è –≤ rate limits
**–†–µ—à–µ–Ω–∏–µ:**
- –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ (—É–∂–µ –≤—ã–±—Ä–∞–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º)
- –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å warning –µ—Å–ª–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä –∏–º–µ–µ—Ç —Å—Ç—Ä–æ–≥–∏–µ –ª–∏–º–∏—Ç—ã
- –î–æ–±–∞–≤–∏—Ç—å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—É—é –∑–∞–¥–µ—Ä–∂–∫—É –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏ (–¥–ª—è –±—É–¥—É—â–∏—Ö –≤–µ—Ä—Å–∏–π)
### ‚ö†Ô∏è –†–∞–∑–º–µ—Ä clientStorage
**–ü—Ä–æ–±–ª–µ–º–∞:** Limit 1MB –¥–ª—è figma.clientStorage
**–†–µ—à–µ–Ω–∏–µ:**
- Prompts library –≤—Ä—è–¥ –ª–∏ –ø—Ä–µ–≤—ã—Å–∏—Ç –ª–∏–º–∏—Ç (—Ç–µ–∫—Å—Ç –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π)
- –ï—Å–ª–∏ –Ω—É–∂–Ω–æ - –¥–æ–±–∞–≤–∏—Ç—å —ç–∫—Å–ø–æ—Ä—Ç/–∏–º–ø–æ—Ä—Ç –≤ JSON —Ñ–∞–π–ª
## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (Future)
–ü–æ—Å–ª–µ –æ—Å–Ω–æ–≤–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å:
1. **Streaming –¥–ª—è –ª–æ–∫–∞–ª—å–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π** (LM Studio)
   - Figma fetch() –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç, –Ω–æ –º–æ–∂–Ω–æ —ç–º—É–ª–∏—Ä–æ–≤–∞—Ç—å chunks
2. **Templates –¥–ª—è –ø—Ä–æ–º–ø—Ç–æ–≤**
   - Placeholder –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ: {{product_name}}, {{target_audience}}
3. **History –≥–µ–Ω–µ—Ä–∞—Ü–∏–π**
   - –°–æ—Ö—Ä–∞–Ω—è—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ N –≥–µ–Ω–µ—Ä–∞—Ü–∏–π
   - –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–º—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É
4. **A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —Å —Ä–∞–∑–Ω—ã–º–∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞–º–∏
   - –°—Ä–∞–≤–Ω–∏–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
5. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Figma Variables**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞
6. **–≠–∫—Å–ø–æ—Ä—Ç/–∏–º–ø–æ—Ä—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π**
   - –®–∞—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ –≤–Ω—É—Ç—Ä–∏ –∫–æ–º–∞–Ω–¥—ã
   - JSON —Ñ–∞–π–ª—ã —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è–º–∏